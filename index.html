<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  
    <meta name="keywords" content="network,linux">
  
  
    <meta name="description" content="兰芝生于幽谷，不以无人而不芳">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    
    望伊如西の博客</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">
  
  <script src="/js/pace.min.js"></script>
</head>
</html>
<body>
<main class="content">
  <section class="jumbotron">
  <div class="video">
    
      <div class="video-frame">
        <img src="/images/ocean/overlay-hero.png" alt="Decorative image frame">
      </div>
    
    <div class="video-media">
      <video playsinline autoplay loop muted data-autoplay poster="/images/ocean/ocean.png" x5-video-player-type="h5">
        <source src="/images/ocean/ocean.mp4" type="video/mp4">
        <source src="/images/ocean/ocean.ogv" type="video/ogg">
        <source src="/images/ocean/ocean.webm" type="video/webm">
        <p>Your user agent does not support the HTML5 Video element.</p>
      </video>
      <div class="video-overlay"></div>
    </div>
    <div class="video-inner text-center text-white">
      <h1><a href="/">望伊如西の博客</a></h1>
      <p>兰芝生于幽谷，不以无人而不芳</p>
      <div><img src="/images/hexo-inverted.svg" class="brand" alt="望伊如西の博客"></div>
    </div>
    <div class="video-learn-more">
      <a class="anchor" href="#landingpage"><i class="fe fe-mouse"></i></a>
    </div>
  </div>
</section>

<div id="landingpage">
  <section class="outer">
  <article class="articles">
    
    <h1 class="page-type-title"></h1>

    
      
        <article id="post-新东方赵丽托福英语词汇8000-00" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/07/15/新东方赵丽托福英语词汇8000-00/">新东方赵丽托福英语词汇8000-00</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/07/15/新东方赵丽托福英语词汇8000-00/" class="article-date">
  <time datetime="2019-07-15T13:50:05.000Z" itemprop="datePublished">2019-07-15</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/英语/">英语</a>
  </div>

      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <h1 id="新东方赵丽托福英语词汇8000-00"><a href="#新东方赵丽托福英语词汇8000-00" class="headerlink" title="新东方赵丽托福英语词汇8000-00"></a>新东方赵丽托福英语词汇8000-00</h1><p>共18词</p>
<table>
<thead>
<tr>
<th style="text-align:center">haunt</th>
<th style="text-align:center">flaunt</th>
<th style="text-align:center">daunt</th>
<th style="text-align:center">vaunt</th>
<th style="text-align:center">gaunt</th>
<th style="text-align:center">jaunt</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">journey</td>
<td style="text-align:center">saunter</td>
<td style="text-align:center">taunt</td>
<td style="text-align:center">ponderous</td>
<td style="text-align:center">slurp</td>
<td style="text-align:center">drone</td>
</tr>
<tr>
<td style="text-align:center">quaff</td>
<td style="text-align:center">ambition</td>
<td style="text-align:center">schedule</td>
<td style="text-align:center">pajama</td>
<td style="text-align:center">famine</td>
<td style="text-align:center">sanguine</td>
</tr>
</tbody>
</table>
<h2 id="1-拆分法—aunt系列"><a href="#1-拆分法—aunt系列" class="headerlink" title="1.拆分法—aunt系列"></a>1.拆分法—aunt系列</h2><p><strong>haunt</strong>(home+aunt)</p>
<blockquote>
<blockquote>
<p>verb:(鬼魂)出没;(不快的事情)萦绕</p>
<p>1.A headless rider haunts the country lanes.<br>一个无头骑士常出没于乡间的小路上。</p>
<p>2.The memory of that day still haunts me.<br>我的脑海中常常回想起那天的情景。</p>
</blockquote>
<blockquote>
<p>noun:常来常往的地方</p>
<p>The pub is a favourite haunt of artists.<br>这家酒吧是艺术家最爱光顾的地方。</p>
</blockquote>
</blockquote>
<p><br></p>
<p><strong>flaunt</strong>(fly+aunt)</p>
<blockquote>
<p>verb:炫耀，夸耀</p>
<p>He did not believe in flaunting his wealth.<br>他不相信摆阔有什么好处。</p>
</blockquote>
<p><br></p>
<p><strong>daunt</strong>(da打+aunt)</p>
<blockquote>
<p>verb:恐吓；使胆怯；使气馁；使失去信心 </p>
<p>She was a brave woman but she felt daunted by the task ahead.<br>她是一个勇敢的女人，但对面前的任务却感到信心不足。</p>
</blockquote>
<p><br></p>
<p><strong>vaunt</strong>(v5+aunt)</p>
<blockquote>
<p>不及物动词<br>夸耀, 吹嘘[…] [of, over, about]<br>~ of one’s skill夸耀自己的技巧</p>
<p>可数名词<br>自夸, 夸张, 吹嘘<br>make a ~ of﹍ 夸耀…</p>
</blockquote>
<p><br></p>
<p><strong>gaunt</strong>(gre+aunt)</p>
<blockquote>
<p>adjective:瘦削憔悴的（常因疾病、饥饿或忧虑）</p>
<p>a gaunt face<br>憔悴的面容</p>
</blockquote>
<p><br></p>
<p><strong>jaunt</strong>(接+aunt)</p>
<blockquote>
<p>noun:短途旅行</p>
<p>a weekend jaunt</p>
<p>周末小旅行</p>
</blockquote>
<p>ps:<strong>journey</strong>接你：长途旅行</p>
<p><br></p>
<p><strong>saunter</strong>(see+aunter)姑姑到处乱看</p>
<blockquote>
<p>verb:闲逛</p>
<p>He sauntered by, looking as if he had all the time in the world.<br>他悠闲地走过，仿佛时间对他来说是无穷无尽的。</p>
</blockquote>
<p><br></p>
<p><strong>taunt</strong>(吐，呸+aunt)</p>
<blockquote>
<blockquote>
<p>verb:辱骂；嘲笑</p>
<p>The other kids continually taunted him about his size.<br>其他孩子不断地耻笑他的个头儿。</p>
</blockquote>
<blockquote>
<p>noun:嘲笑（或讽刺、奚落等）的言辞</p>
<p>Black players often had to endure racist taunts.<br>黑人运动员经常得忍受种族歧视性的奚落。</p>
</blockquote>
</blockquote>
<p><br></p>
<hr>
<h2 id="2-谐音联想法"><a href="#2-谐音联想法" class="headerlink" title="2.谐音联想法"></a>2.谐音联想法</h2><p><strong>ponderous</strong>(胖的要死)</p>
<blockquote>
<p>adjective:笨重的，缓慢的</p>
<p>She watched the cow’s ponderous progress.<br>她看着牛迟缓地向前走着。</p>
</blockquote>
<p><br></p>
<p><strong>slurp</strong>(嗖的一下)</p>
<blockquote>
<p>verb:（喝东西时）发出啧啧的声音</p>
<p>He was slurping his tea.<br>他正咂着嘴喝茶。</p>
</blockquote>
<p><br></p>
<p><strong>drone</strong>(juan～juan～,蜜蜂等嗡嗡的声音)</p>
<blockquote>
<p>noun:嗡嗡声</p>
<p>the distant drone of traffic<br>远处车辆往来发出的嗡嗡声</p>
</blockquote>
<p><br></p>
<p><strong>quaff</strong>(夸父追日饮一河之水；马和骡子kuafukuafu喝水的声音)</p>
<blockquote>
<p>verb:豪饮；痛饮；开怀畅饮</p>
</blockquote>
<p><br></p>
<p><strong>ambition</strong>(俺必胜)</p>
<blockquote>
<p>noun:追求的目标;野心</p>
<p>1.It had been her lifelong ambition.<br>这是她终身追求的目标。</p>
<p>2.She was intelligent but suffered from a lack of ambition.<br>她很聪明，但却缺乏远大志向。</p>
</blockquote>
<p><br></p>
<hr>
<h2 id="3-拼音联想法"><a href="#3-拼音联想法" class="headerlink" title="3.拼音联想法"></a>3.拼音联想法</h2><p><strong>schedule</strong>(s+che+du+le,该死的车又堵了，我们不得不改变我们的计划表)</p>
<blockquote>
<p>noun:工作计划；日程安排</p>
<p>I have a hectic schedule for the next few days.<br>我今后几天的日程紧得要命。</p>
</blockquote>
<p><br></p>
<p><strong>pajama</strong>(pa+ja+ma,趴在家妈妈穿的)</p>
<blockquote>
<p>noun:睡衣</p>
</blockquote>
<p><br></p>
<p><strong>famine</strong>(fa+mi+ne,发米呢)</p>
<blockquote>
<p>noun:饥荒</p>
<p>a severe famine<br>严重饥荒</p>
</blockquote>
<p><br></p>
<p><strong>sanguine</strong>(san+gui+ne,三桂呢)</p>
<blockquote>
<p>adjective:充满信心的；乐观的;面色红润的</p>
<p>hey are less sanguine about the company’s long-term prospects.<br>他们对公司的远景不那么乐观。</p>
</blockquote>

      

      

          
        
          
        </div>

    </div>
    <footer class="article-footer">
      <a data-url="https://dilidonglong.github.io/2019/07/15/新东方赵丽托福英语词汇8000-00/" data-id="cjy4gbs290002o4quaqc4892c" class="article-share-link">分享</a>
      
    </footer>

  

  

  

</article>



      
        <article id="post-远程桌面访问不了" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/07/07/远程桌面访问不了/">远程桌面访问不了</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/07/07/远程桌面访问不了/" class="article-date">
  <time datetime="2019-07-07T08:08:47.000Z" itemprop="datePublished">2019-07-07</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/实战/">实战</a>
  </div>

      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <h1 id="远程桌面访问不了"><a href="#远程桌面访问不了" class="headerlink" title="远程桌面访问不了"></a>远程桌面访问不了</h1><p><strong>问题：总部PC去访问分支的服务器3389桌面，会出现不定时中断的问题</strong></p>
<ol>
<li><p>10.0.2.132为PC 10.16.2.200为远程桌面的服务器</p>
</li>
<li><p>拓扑环境</p>
<p><img src="/2019/07/07/远程桌面访问不了/13.png" alt="1"></p>
</li>
</ol>
<p>总部有三层环境，AC透明模式部署，分支二层环境，就一个网段</p>
<ol start="3">
<li>数据包是总部访问分支访问不了的时候抓取的数据包，要求通过数据包，分析问题原因。</li>
</ol>
<hr>
<p><strong>排查思路：</strong></p>
<ol>
<li><p>只抓取了分支vpn上eth0口的包和总部vpn设备eth0上的包（建议是分支电脑和总部服务器都抓取，抓不了也没    办法）</p>
</li>
<li><p>因为是终端pc访问服务器的时候经常断开。所以先看在终端侧的数据包，也即是查看zbssleth0这个包</p>
<blockquote>
<ol>
<li>打开之后，先点击<strong>Statistics</strong>，选中<strong>conversation</strong></li>
</ol>
<p><img src="/2019/07/07/远程桌面访问不了/1.jpg" alt="1"></p>
<ol start="2">
<li>出现下图界面，选中<strong>TCP</strong>，看到存在三个连接。说明应该是测试过3次。其中注意到字节数Bytes， 第二个连接有112kB，比其他连接传输的数据都多，那我们就先来看这个连接。</li>
</ol>
<p><img src="/2019/07/07/远程桌面访问不了/2.jpg" alt="1"></p>
<ol start="3">
<li>怎么看呢？右键该连接后，照下图操作</li>
</ol>
<p><img src="/2019/07/07/远程桌面访问不了/3.jpg" alt="1"></p>
<ol start="4">
<li>wireshark自动过滤该连接，显示如下界面</li>
</ol>
<p><img src="/2019/07/07/远程桌面访问不了/4.jpg" alt="1"></p>
<ol start="5">
<li>我们可以点开专家分析来看看，是否存在什么问题。点开之后，记得把<strong>Limit to Display ﬁlter</strong> 给勾上，这样才会显示在wireshark过滤后展示页面的信息。</li>
</ol>
<p><img src="/2019/07/07/远程桌面访问不了/5.jpg" alt="1"></p>
<p><img src="/2019/07/07/远程桌面访问不了/6.jpg" alt="1"></p>
<ol start="6">
<li>由于不涉及访问卡慢的问题，所以此时我们没必要看重传等信息。重点应该关注是什么导致的连接  断开。此时，明显能看到告警信息中，存在RST包，那我们就可以看下304号包与306号包。</li>
</ol>
<p><img src="/2019/07/07/远程桌面访问不了/7.jpg" alt="1"></p>
<ol start="7">
<li>找到304号包与306包后，发现后面就再也没有数据了，说明此时连接是中断了。明明数据传的好好   的，怎么突然客户端10.0.2.132就发送一个RST包呢。此时需要注意的是，我们的数据包是在总部vpn设备上eth0口抓的，也就是说这个流量是从内部传过来的。结合着总部的拓扑情况，出现中断，  可能存在2种情况。要么是客户端自己的问题，要么就是有啥子设备替客户端发送了这个RST包。</li>
</ol>
<p><img src="/2019/07/07/远程桌面访问不了/8.jpg" alt="1"></p>
<ol start="8">
<li><p>一个直接的办法就是在客户端上抓包。看下客户端有没有发出这个RST包。如果没有，结合着网络拓  扑，那基本就可以确定是AC发了这个RST包了（第一个，客户环境比较简单；第二个，谁叫AC是行  为管控呢）。如果客户端上的抓包有这个RST，那就是客户端的问题。</p>
</li>
<li><p>如果客户说，我电脑上不能安装其他软件（不管为啥，你就当死活不允许好了）。那就是说，我们  不能在客户端上抓包。那好，我们就只能在现有的数据包中获取蛛丝马迹了。</p>
</li>
<li><p>此时，我们还有一个方法判断是不是由客户端发出的这个RST包，那就是通过IP.ID这个参数。</p>
</li>
<li><p>IP.ID是什么鬼？那我们要知道数据包是如何封装的，如下图所示。如果看不懂，请参考<a href="https://wizardforcel.gitbooks.io/network-basic/content/0.html" target="_blank" rel="noopener">网络基本功</a>。IP.ID是IP数据报头中的一个字段。表明了一个数据包的身份，比如一个数据内容过大，被传输的时候就要对这个数据进行切割，即进行分片。当接收方收到这些分片后，需要把这些分片组装起来，那接收方每次收这么多的数据包，它咋知道哪些分片是从同一个数据内容中出来的呢？就要靠IP.ID了，通过IP.ID就可以把这些分片组装起来，还原成最初始的大块数据。就像你玩乐高玩具，乐  高里面这么多零件，如果这些零件中混入了其他玩具的零件。那你想把这个乐高玩具组装起来肯定需要一个标识来进行识别哪些零件是同属于一个乐高模型的。</p>
<p><img src="/2019/07/07/远程桌面访问不了/9.jpg" alt="1"></p>
</li>
<li><p>上述还只是告诉了你，啥是IP.ID。那回到问题中来，你还需要知道的一个点就是，如果是一个设备   去发数据包，那么他的IP.ID增长是线性的。即一般来说，同一台设备发出第一个包，如果IP.ID是1，   第二个包就是2。就算不符合这规律，那数值起码也不会差太多。</p>
</li>
<li><p>我们再来看下wireshark，299号包的IP.ID=18970。302号包的IP.ID=18971。而304号包的IP.ID=22566。那RST包和之前的两个包，这数值也差的太多了啊，所以基本能判断这个包不是客户端发出的。</p>
<p><img src="/2019/07/07/远程桌面访问不了/10.jpg" alt="1"></p>
</li>
</ol>
<p> <img src="/2019/07/07/远程桌面访问不了/11.jpg" alt="1"></p>
<p> <img src="/2019/07/07/远程桌面访问不了/12.jpg" alt="1"></p>
</blockquote>
</li>
</ol>

      

      

          
        
          
        </div>

    </div>
    <footer class="article-footer">
      <a data-url="https://dilidonglong.github.io/2019/07/07/远程桌面访问不了/" data-id="cjy4gbs2y000mo4qu0abej4ja" class="article-share-link">分享</a>
      
    </footer>

  

  

  

</article>



      
        <article id="post-视频会议卡顿" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/06/13/视频会议卡顿/">视频会议卡顿</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/06/13/视频会议卡顿/" class="article-date">
  <time datetime="2019-06-13T14:29:26.000Z" itemprop="datePublished">2019-06-13</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/实战/">实战</a>
  </div>

      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <h1 id="视频会议卡顿——用wireshark定位问题"><a href="#视频会议卡顿——用wireshark定位问题" class="headerlink" title="视频会议卡顿——用wireshark定位问题"></a>视频会议卡顿——用wireshark定位问题</h1><p><strong>基础知识</strong>（TCP和UDP的比较）</p>
<p>TCP报文和UDP报文如下</p>
<p><img src="/2019/06/13/视频会议卡顿/1.png" alt="1551317757941"></p>
<p>在报文头部中，我们可以知道，TCP除了源目端口，还会有seq号，ack号，6个标志位以及一个接受窗口字段。而UDP报文头部只有源目端口，长度和校验和字段。UDP报文头部8字节，TCP的最短报文头部20字节，UDP报文头部连TCP头部长度的一半都不到，想复杂也复杂不起来。</p>
<p>我们知道TCP是需要建立连接后才会开始传输数据的，而UDP不用。TCP就像打电话，必须先拨通对方手机，然后才互相交流，如果对方没有听清，那自己就可以把话语重复一遍，确保对方接收无误。UDP就像发短信，我给一个人发送短信后，第一不会知道对方是否有收到；即便对方收到后，我也不知道信息发给对方有没有出错。</p>
<p>在TCP中，假设有很长一段数据要发送，假设有4380（1460*3）字节的数据。我们知道在以太网中，以太网帧的数据部分最大长度是1500字节，假设TCP和IP头部各占20字节，那么一个TCP段的数据就是1460字节，超过这个字节就要分段。所以这4380个字节就要分成3个包去发送。这3个包就类似于下表，假设第一个包的seq号是0，那么下一个包的seq号就是1460（上一个包的seq号+长度）。</p>
<table>
<thead>
<tr>
<th>包号</th>
<th>seq号</th>
<th>lenth长度</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0</td>
<td>1460</td>
</tr>
<tr>
<td>2</td>
<td>1460</td>
<td>1460</td>
</tr>
<tr>
<td>3</td>
<td>2920</td>
<td>1460</td>
</tr>
</tbody>
</table>
<p>正常情况下，接收方要收到这3个包。假设第二个包在传输过程中丢失了，接收方只能收到seq号是0（长度是1460字节）和seq号是2920（1460字节）的包，那他就清楚1460的这个包在路上丢失了，就可以要发送方重传第二个包。</p>
<p>对于UDP而言，它没有建立连接的机制，同时也没有流控和差错控制机制。那它要发送数据出去，如果数据部分超过了最大的数据长度1472字节（以太网帧的数据部分最大长度是1500字节，IP头部20字节，UDP头部8字节），就要靠下层的IP来分片。分片要如何组装起来，在之前的文章中提到过，涉及的就是ip.id和片偏移。</p>
<p>如果数据部分没有超过UDP中的最大数据长度，就不会被分片，那么每个报文的ip.id也就是不一样的。</p>
<p>也就是说在UDP中，发送方发送一个小数据出去，接收方收到就收到了，没收到那我也不知道，也不会重传。</p>
<p>而发送方要是发送一个大数据（超过UDP最大数据长度，会有多个分片），如果有一个分片丢失，那么接收方按ip.id和片偏移无法组装起来，那么就会向发送方发送消息，让发送方重传。此时的重传不会像TCP一样，只发送丢弃的那个包，而是要把之前这个包的所有分片全部重传。</p>
<hr>
<p><strong>客户问题</strong></p>
<p>左边是分支，右边是总部。分支的视频服务器上看总部端的画面很流程，但是在总部的视频服务器上看分支端的画面则特别卡。</p>
<p><strong>客户拓扑</strong></p>
<p><img src="/2019/06/13/视频会议卡顿/2.png" alt="1551317757941"></p>
<p><strong>问题分析</strong></p>
<ol>
<li><p>视频会议和语音通话基本都是使用UDP协议。同时数据字节不会很大，一般不会超过最大UDP数据报文长度，那么每个数据包ip.id的值是不一样的。不会出现设备收到分片组装不起来的情况。</p>
</li>
<li><p>分支的视频服务器看总部的画面正常，说明总部给分支传的UDP数据流是没有丢包的。</p>
</li>
<li><p>总部的视频服务器看分支画面有卡顿，说明分支给总部传的UDP数据流可能存在丢包。</p>
</li>
<li><p>总部和分支之间互传数据是互不干扰的。因为不是TCP下，建立连接后的两端数据互传。</p>
</li>
<li><p>两台设备上都做了策略路由，视频服务器的流量都走了联通线路。（其实最开始的情况是，分支到总部的数据往电信线路传了，总部往分支的数据就走了联通，存在总部看分支画面丢包的情况。怀疑是线路问题，就调整了策略，让数据都走了联通，但是问题还是存在。）</p>
</li>
<li><p>查看两端的控制台配置，策略都是正常的。出现丢包的时候，经过设备的流量都不大，cpu利用率也不高。</p>
</li>
<li><p>于是在客户两端都开启视频服务器的情况下，抓包分析。</p>
</li>
</ol>
<p><img src="/2019/06/13/视频会议卡顿/3.png" alt="1551317757941"></p>
<ol start="8">
<li>先看分支的内网口（eth0）的抓包情况。</li>
</ol>
<p><img src="/2019/06/13/视频会议卡顿/4.png" alt="1551317757941"></p>
<ol start="9">
<li>由于是总部看分支，画面存在卡顿。那我们主要关注的就是分支视频服务器172.17.160.8给总部视频服务器10.16.121.250这个方向的流量</li>
</ol>
<p><img src="/2019/06/13/视频会议卡顿/5.png" alt="1551317757941"></p>
<p>选择B到A这个方向。选择完后，主界面就会自动给你过滤出分支视频服务器给总部视频服务器这个方向的流量</p>
<p><img src="/2019/06/13/视频会议卡顿/6.png" alt="1551317757941"></p>
<p><img src="/2019/06/13/视频会议卡顿/7.png" alt="1551317757941"></p>
<ol start="10">
<li><p>由于画面存在卡顿，很可能的原因是丢包。UDP不像TCP那样，有所谓的seq号。在TCP中，哪个包丢了，我可以通过seq号把丢的包找到，但UDP不行。那有没有什么办法可以让UDP像TCP一样，能给这些数据包按顺序编个号吗？哪个UDP包丢了，我可以通过这个编号识别到。</p>
</li>
<li><p>是可以的。那就是把UDP的数据包编码为RTP的数据包，对RTP协议感兴趣的同学可以看这篇文章<a href="https://www.jianshu.com/p/631273bc9847?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=reader_share&amp;utm_source=weibo" target="_blank" rel="noopener">实时传输协议RTP/RTCP</a></p>
</li>
</ol>
<p><img src="/2019/06/13/视频会议卡顿/8.png" alt="1551317757941"></p>
<p>我们来看下把UDP包编码成RTP包在wireshark中是啥样的。</p>
<p><img src="/2019/06/13/视频会议卡顿/9.png" alt="1551317757941"></p>
<p><img src="/2019/06/13/视频会议卡顿/10.png" alt="1551317757941"></p>
<p>上图看到，其实所谓的编码，是把UDP包中的数据部分变成了RTP数据报文，RTP数据报文中存在seq号。</p>
<ol start="12">
<li>我们在<strong>会话统计</strong>中可以看到分支给总部传数据的时候，建立了6个连接。其中前2个连接的数据量相对大一些。</li>
</ol>
<p><img src="/2019/06/13/视频会议卡顿/11.png" alt="1551317757941"></p>
<p>为什么前2个连接，传输的数据多些呢？</p>
<p><img src="/2019/06/13/视频会议卡顿/12.png" alt="1551317757941"></p>
<p><img src="/2019/06/13/视频会议卡顿/13.png" alt="1551317757941"></p>
<ol start="13">
<li>我们先选择第一个连接，即端口49152到端口2326的。把这个连接使用的UDP协议编码为RTP协议</li>
</ol>
<p><img src="/2019/06/13/视频会议卡顿/14.png" alt="1551317757941"></p>
<p><img src="/2019/06/13/视频会议卡顿/15.png" alt="1551317757941"></p>
<ol start="14">
<li>编码之后，此时wireshark界面如图所示</li>
</ol>
<p><img src="/2019/06/13/视频会议卡顿/16.png" alt="1551317757941"></p>
<ol start="15">
<li>接下来，我们打开RTP流分析。可以看到面板已经给我们统计出有2个丢包了，你还能分析出是丢了哪两个包。</li>
</ol>
<p><img src="/2019/06/13/视频会议卡顿/17.png" alt="1551317757941"></p>
<p><img src="/2019/06/13/视频会议卡顿/18.png" alt="1551317757941"></p>
<p><img src="/2019/06/13/视频会议卡顿/19.png" alt="1551317757941"></p>
<p> <strong>16.由于是打开的分支eth0接口的抓包，所以此时就可以说明，丢包是丢在了内网</strong></p>
<ol start="17">
<li>按照同样的方法，我们还要查看下在公网链路上是否存在丢包，以及在总部内网是否存在丢包。</li>
</ol>
<p><img src="/2019/06/13/视频会议卡顿/2.png" alt="1551317757941"></p>
<ol start="18">
<li><p>因为分支内网存在丢包，所以在查看公网链路上的数据包时（即fzeth3和zbeth2），如果公网数据包中，丢包的序列号和在fzeth0数据包内的一致，说明公网是没有丢包的。如果除去内网中丢包的序列号，还有其他序列号丢失，说明公网链路也有问题。</p>
</li>
<li><p>从fzeth3的数据包中，可以看到丢了2个，也是seq=34591和seq=34637丢包了。和内网抓包fzeth0丢包情况一致。而在总部设备的2个口抓包情况也是一样的，就不赘述了。查看方法和上述一致。</p>
</li>
</ol>
<p><img src="/2019/06/13/视频会议卡顿/20.png" alt="1551317757941"></p>
<ol start="20">
<li><p>定位了问题后，可以判断分支内网存在丢包。那么有条件的话就可以在分支视频服务器及交换机上抓包对比查看。</p>
</li>
<li><p>最后定位出的问题是交换机网口有问题，换一个交换机问题就解决了。</p>
</li>
</ol>

      

      

          
        
          
        </div>

    </div>
    <footer class="article-footer">
      <a data-url="https://dilidonglong.github.io/2019/06/13/视频会议卡顿/" data-id="cjy4gbs2q000bo4que1bwg82n" class="article-share-link">分享</a>
      
    </footer>

  

  

  

</article>



      
        <article id="post-并行-串行-异步传输" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/06/12/并行-串行-异步传输/">并行/串行/异步传输</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/06/12/并行-串行-异步传输/" class="article-date">
  <time datetime="2019-06-12T14:45:28.000Z" itemprop="datePublished">2019-06-12</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/收录文章/">收录文章</a>
  </div>

      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <h1 id="【转载】什么是并行传输、串行传输、异步传输？"><a href="#【转载】什么是并行传输、串行传输、异步传输？" class="headerlink" title="【转载】什么是并行传输、串行传输、异步传输？"></a>【转载】什么是并行传输、串行传输、异步传输？</h1><blockquote>
<p>文章收录自互联网，著作权归原作者所有，若有冒犯请联系我删除。</p>
<p>商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<p>本人转载只作个人学习及后续查阅使用</p>
<p>该篇文档作者：航空航天迷</p>
<p>原文链接：<a href="https://www.zhihu.com/question/29033993" target="_blank" rel="noopener">什么是并行传输、串行传输、异步传输？</a></p>
<p>来源：知乎</p>
</blockquote>
<hr>
<p><img src="/2019/06/12/并行-串行-异步传输/1.jpg" alt="img"></p>
<p>传输可以分为<strong>串行传输</strong>和<strong>并行传输。</strong></p>
<p><strong>串行传输</strong>可分为<strong>异步传输、同步传输</strong>和<strong>等时传输</strong>。</p>
<p>下图2是<strong>并行传输</strong>的示意图：</p>
<p><img src="/2019/06/12/并行-串行-异步传输/2.jpg" alt="img"></p>
<p>在<strong>并行传输</strong>中，使用多根并行的数据线一次同时传输多个比特。</p>
<p>例如在图2中，共有8根数据线，一次同时传输8个比特，每个比特占用一根数据线。</p>
<p>下图3是<strong>串行传输</strong>的示意图：</p>
<p><img src="/2019/06/12/并行-串行-异步传输/3.jpg" alt="img"></p>
<p>在<strong>串行传输</strong>中，使用一根数据线传输数据，一次传输1个比特，多个比特需要一个接一个依次传输。</p>
<p>下面简单介绍一下<strong>串行传输</strong>与<strong>并行传输</strong>的发展历史，从而了解他们俩各自的优缺点，以及发展趋势。</p>
<p>最早的计算机（电子管计算机和晶体管计算机），其各个接口，例如输入接口、输出接口和存储器接口等，一般采用串行接口，以<strong>串行传输</strong>的方式传输数据。</p>
<p>下图4为电子管计算机ENIAC</p>
<p><img src="/2019/06/12/并行-串行-异步传输/4.jpg" alt="img"></p>
<p>电子管计算机ENIAC诞生于美国宾夕法尼亚大学。重30多吨，占地约170平方米，装有约18000只电子管。</p>
<p>下图5为电子管计算机中使用的电子管</p>
<p><img src="/2019/06/12/并行-串行-异步传输/5.jpg" alt="img"></p>
<p>图5中小玻璃瓶状的东西就是电子管，电子管的体积比较大  下图6为晶体管计算机TRADIC</p>
<p><img src="/2019/06/12/并行-串行-异步传输/6.jpg" alt="img"></p>
<p>1954年，贝尔实验室使用800只晶体管组装了世界上第一台晶体管计算机TRADIC。相比电子管，晶体管体积小、重量轻、寿命长、发热少、功耗低，大大改进了计算机中的电子线路的结构，大幅度提高了运算速度。  下图7为晶体管计算机TRADIC中使用的晶体管</p>
<p><img src="/2019/06/12/并行-串行-异步传输/7.jpg" alt="img"></p>
<p>电子管计算机和晶体管计算机以<strong>串行传输</strong>的方式传输数据，其原因是当时各个部件都是分立的部件，而不是像今天这样使用集成电路设计。如果采用并行线路的话，元件的数量和占用的空间将成倍增长。比如，一个8比特并行线路的元件数量是串行线路的元件数量的8倍（因为需要为每根线路配置一套接收元件）。另外，元件的数量成倍增长的话，耗电量也会大幅增加。  集成电路技术出现后，大量元件可以集成到一个小小的芯片上，<strong>并行传输</strong>变得方便而便宜。不论是8比特、16比特还是更高比特位数的并行线路，只需要一个并行接口芯片就可以处理，而且并行接口芯片只比串行接口芯片贵一点。</p>
<p>除了方便便宜外，在相同的工作频率下<strong>并行传输</strong>的传输速度是<strong>串行传输</strong>的数倍，迎合了人们对速度的追求，所以硬盘、打印机等设备开始使用<strong>并行传输</strong>以提高传输速度。PATA（Parallel Advanced Technology Attachment，并行高级技术附件）接口、并口（Parallel Port）和PCI（Peripheral Component Interconnect，外设部件互连）接口成为流行的并行接口。</p>
<p>下图8为电脑主板上的PATA接口（<strong>并行传输</strong>），用于连接硬盘和光驱</p>
<p><img src="/2019/06/12/并行-串行-异步传输/8.jpg" alt="img"></p>
<p>下图9为用于PATA接口的连接线缆</p>
<p><img src="/2019/06/12/并行-串行-异步传输/9.jpg" alt="img"></p>
<p>下图10中的编号2为电脑上的并口（<strong>并行传输</strong>），用于连接打印机、扫描仪等</p>
<p><img src="/2019/06/12/并行-串行-异步传输/10.jpg" alt="img"></p>
<p>下图11为电脑主板上的PCI接口（<strong>并行传输</strong>），用于插接外置网卡、声卡、显卡和调制解调器卡等）</p>
<p><img src="/2019/06/12/并行-串行-异步传输/11.jpg" alt="img"></p>
<p>下图12为采用PCI接口的显卡</p>
<p><img src="/2019/06/12/并行-串行-异步传输/12.jpg" alt="img"></p>
<p>图12中的显卡使用时是插入图11中的PCI接口（插槽）中。</p>
<p>在相同的工作频率下<strong>并行传输</strong>的传输速度是<strong>串行传输</strong>的数倍，但并行线路有一些难以克服的缺点，导致依靠并行线路的<strong>并行传输</strong>无法用于长距离通信。计算机与外界的长距离通信，例如与网络中的另外一台计算机进行通信时，只能使用<strong>串行传输</strong>。</p>
<p>在计算机内部，如今<strong>串行传输</strong>也显示出了它的优势，有取代<strong>并行传输</strong>的趋势。</p>
<p>例如，</p>
<p>SATA接口取代PATA接口；</p>
<p>USB接口取代并口；</p>
<p>PCI Express接口取代PCI接口。</p>
<p>为什么<strong>串行传输</strong>有取代<strong>并行传输</strong>的趋势呢？</p>
<p>与<strong>串行传输</strong>相比，<strong>并行传输</strong>的缺点是：</p>
<p>一、线路的成本高</p>
<p><strong>并行传输</strong>如果每个时钟节拍发送16个比特，则需要16根数据线（另外还需要多根控制线）。</p>
<p><img src="/2019/06/12/并行-串行-异步传输/13.jpg" alt="img"></p>
<p>PATA（<strong>并行传输</strong>）连接线缆包含40根导线（16根数据线，24根用于接地和进行控制）；</p>
<p>SATA（<strong>串行传输</strong>）连接线缆包含7根导线（4数据线+3接地线）。</p>
<p>如果是长距离通信，<strong>并行传输</strong>的线路成本是<strong>串行传输</strong>的若干倍。</p>
<p>另外，只有一对传输线时，<strong>串行传输</strong>也可以实现双向通信，所以可以直接利用现有的电话线路进行数据传输；而<strong>并行传输</strong>要多根并行的传输线，没有现有的线路可以利用，要另外专门铺设线路，成本高。</p>
<p>二、体积大</p>
<p>并行接口占用空间大，对应线缆占用空间也大。</p>
<p><img src="/2019/06/12/并行-串行-异步传输/14.jpg" alt="img"></p>
<p>如图14所示，PATA的接口与连接线缆的尺寸大大于SATA的接口与连接线缆的尺寸</p>
<p>如果是长距离通信，要求使用比较粗的信号线，以便降低信号的衰减，<strong>并行传输</strong>需要使用多根较粗的信号线捆扎在一起组成通信线缆，占很大空间。</p>
<p>即使是计算机内部通信，<strong>并行传输</strong>的线缆所占用的空间也比<strong>串行传输</strong>的线缆所占用的空间大很多。</p>
<p>并行接口的尺寸比串行接口的尺寸大很多，则不利于设备的小型化。例如，在手机和穿戴式设备等领域，希望零件的尺寸越小越好。</p>
<p>三、信号线之间的干扰大，不能用于长距离传输</p>
<p>并排的信号线在进行高速传输时，会在每条信号线的周围产生微弱的电磁场，出现串音干扰，进而影响到其它信号线中的数据传输。传输距离越长，串音干扰越严重。</p>
<p><img src="/2019/06/12/并行-串行-异步传输/15.jpg" alt="img"></p>
<p>所以，PATA线缆的长度不能超过0.4米，而SATA线缆可以达到1米。</p>
<p>四、<strong>并行传输</strong>具有同步问题</p>
<p><img src="/2019/06/12/并行-串行-异步传输/16.jpg" alt="img"></p>
<p><strong>并行传输</strong>中，如果并行的线路之间的物理性质不一致，例如长度上有细微差别，会导致并行线路中传输的比特不是同时到达接收方，接收器接收数据时容易出错。</p>
<p>五、传输频率低</p>
<p>在<strong>并行传输</strong>中，如果传输频率高的话，数据线之间会产生很大的干扰，造成数据出错，即使为数据线添加屏蔽层，也不能保证屏蔽掉高频率产生的干扰。所以，<strong>并行传输</strong>的最高传输频率有一定限制。</p>
<p>PATA接口的最高传输频率为33MHz，这个几乎已经达到了并行接口的极限。</p>
<p><strong>串行传输</strong>每次只传输一个比特，但是它的传输频率可以非常高，达到10GHz，是33MHz的300倍。相当于<strong>并行传输</strong>每发送1次，<strong>串行传输</strong>可以发送300次。<strong>并行传输</strong>每次发送300比特，才能赶上<strong>串行传输</strong>的速度，但是每次发送300比特，就需要300根并行的数据线，这是不现实的。</p>
<p>因为<strong>并行传输</strong>和<strong>串行传输</strong>各自的这些优缺点，导致<strong>并行传输</strong>仅仅用于短距离传输，而长距离传输则采用<strong>串行传输</strong>；同时，在短距离传输中，<strong>串行传输</strong>也在逐步取代<strong>并行传输</strong>。</p>
<p>什么是<strong>异步传输</strong>呢？</p>
<p><img src="/2019/06/12/并行-串行-异步传输/17.jpg" alt="img"></p>
<p>计算机的键盘与主机之间的数据传输就是<strong>异步传输</strong>。</p>
<p>在键盘上按下一个字母键、数字键或特殊字符键，键盘就需要向主机发送一个对应的长度为8比特的ASCII字符，这个8比特的ASCII字符就是需要发送的数据，大小为1个字节。</p>
<p><img src="/2019/06/12/并行-串行-异步传输/18.jpg" alt="img"></p>
<p>如上图所示：例如，当用户按下小写字母键“k”，键盘需要向主机发送字符“01101011”</p>
<p>用户可能在任意时刻按键盘，所以键盘向主机发送数据的时间不是固定的，也不会事先约好，任何时刻都有可能发送。</p>
<p>主机事先并不知道键盘什么时候会给自己发送数据，只能静静地等待，一旦发现键盘向自己发送数据，则马上接收。</p>
<p>主机如何发现键盘开始向自己发送数据了呢？</p>
<p><img src="/2019/06/12/并行-串行-异步传输/19.jpg" alt="img"></p>
<p>当键盘不需要向主机发送有效数据时，也就是键盘处于空闲（idle）时，键盘会连续不断地向主机发送比特“1”，告诉主机自己处于空闲状态。比特“1”用正电平表示，也就是键盘一直向主机发送正电平，表示当前没有有效数据发送给主机。</p>
<p>当键盘被按下，键盘需要向主机发送数据时，键盘会先在数据前添加比特“0”，组成新字符，再发送。</p>
<p><img src="/2019/06/12/并行-串行-异步传输/20.jpg" alt="img"></p>
<p>例如，如上图所示，发送数据“01101011”之前，先在“01101011”的前面添加“0”，组成新字符“011010110”</p>
<p>比特“0”可以用零电平表示。 </p>
<p><img src="/2019/06/12/并行-串行-异步传输/21.jpg" alt="img"></p>
<p>如上图所示，键盘处于空闲时，主机接收的一直是比特“1”（正电平），当主机突然接收到比特“0”（零电平）时，马上反应过来，键盘在向自己发送有效数据，则主机开始接收“0”后面的有效数据，这个“0”相当于这个新字符的起始位（start bit）。</p>
<p>主机开始接收有效数据后，怎么才能知道有效数据接收完了要停下来呢？</p>
<p>为了解决这个问题，键盘和主机事先约定好：</p>
<ol>
<li>每次发送的有效数据为1个字节，即8个比特</li>
</ol>
<p><img src="/2019/06/12/并行-串行-异步传输/22.jpg" alt="img"></p>
<ol start="2">
<li><p>数据的传输速率（例如1000比特/秒）</p>
</li>
<li><p>键盘在有效数据前面添加起始位（比特0），以通知主机，数据开始发送</p>
</li>
</ol>
<p><img src="/2019/06/12/并行-串行-异步传输/23.jpg" alt="img"></p>
<ol start="4">
<li>键盘在有效数据后面添加停止位（比特1），以通知主机，数据发送结束</li>
</ol>
<p><img src="/2019/06/12/并行-串行-异步传输/24.jpg" alt="img"></p>
<p>下图显示的是：键盘根据和主机的约定，发送给主机的数据和对应的信号。 </p>
<p><img src="/2019/06/12/并行-串行-异步传输/25.jpg" alt="img"></p>
<p>当按键“k”被按下时，键盘实际上发送的是“起始位”+k对应的ASCII码+“停止位”。</p>
<p>键盘发送信号的过程：</p>
<p>键盘在空闲时，连续地发送正电平给主机，表示当前没有有效数据发送给主机。</p>
<p>当按键“k”被按下时，键盘发送“起始位”+k对应的ASCII码+“停止位”这3者所对应的信号。然后紧跟着继续发送正电平，表示又处于空闲状态。</p>
<p>主机接收信号的过程：</p>
<p>主机开始接收到的一直是正电平，表示当前没有有效数据发送给主机。</p>
<p>主机接收到起始位比特“0”（零电平）后，开始接收比特“0”后面的有效数据。</p>
<p>根据约定，有效数据为1个字节，共8个比特；数据的传输速率例如为1000比特/秒，也就是每毫秒传输1个比特，则8个比特的传输时间为8毫秒。</p>
<p>所以主机根据自己的时钟，在起始位比特“0”后面的8毫秒内接收有效数据。</p>
<p>具体的接收方式（举例说明）是：</p>
<p><img src="/2019/06/12/并行-串行-异步传输/26.jpg" alt="img"></p>
<p>主机在起始位后面的0.5毫秒、1.5毫秒、2.5毫秒、3.5毫秒、4.5毫秒、5.5毫秒、6.5毫秒、7.5毫秒分别对信号进行采样，也就是在每个比特的正中间进行采样，以获得这8比特的有效数据。</p>
<p>根据约定，8比特的有效数据后面跟着的是停止位。</p>
<p>如果主机在第8.5毫秒接收到比特“1”（停止位），则主机可以确定数据的发送确实结束了，则结束有效数据的接收，并接受所接收的数据。</p>
<p>如果主机在第8.5毫秒接收到的不是比特“1”（停止位），则主机判断传输过程中发生错误，就放弃所接收到的数据。</p>
<p>无论接受还是放弃所接收到的数据，主机都不会向键盘进行反馈。</p>
<p>键盘向主机发送数据后，就撒手不管了，不会等待主机的确认或其他任何反馈。</p>
<p>在停止位之后，主机接收到的是表示空闲的正电平，继续等待键盘发送数据。</p>

      

      

          
        
          
        </div>

    </div>
    <footer class="article-footer">
      <a data-url="https://dilidonglong.github.io/2019/06/12/并行-串行-异步传输/" data-id="cjy4gbs3j0014o4qu89rphf4b" class="article-share-link">分享</a>
      
    </footer>

  

  

  

</article>



      
        <article id="post-访问X友软件卡顿" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/06/11/访问X友软件卡顿/">访问X友软件卡顿</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/06/11/访问X友软件卡顿/" class="article-date">
  <time datetime="2019-06-11T14:23:27.000Z" itemprop="datePublished">2019-06-11</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/实战/">实战</a>
  </div>

      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <h1 id="2017年应用访问卡慢分析"><a href="#2017年应用访问卡慢分析" class="headerlink" title="2017年应用访问卡慢分析"></a>2017年应用访问卡慢分析</h1><h2 id="1-基本情况："><a href="#1-基本情况：" class="headerlink" title="1.基本情况："></a>1.基本情况：</h2><p>客户环境现象：</p>
<p>总部和分支使用sangfor vpn对接，分支内网电脑ping总部内网服务器，没有丢包，没有延时。但是在分支使用X友客户端访问总部的X友服务器会出现卡顿（即打开客户端后，有些内容显示出来的等待时间较长）</p>
<p>为了排错，客户那边基本没有其他流量在跑。</p>
<hr>
<p>客户内网拓扑：</p>
<p>总部和分部通过woc做vpn对接（没开加速），其中eth0口是内网口，pppoe和wan（eth2）口是外网口。分支woc的wan口（pppoe）地址是100.64.7.184，eth0（lan口）地址是10.37.11.254，lan口下连一台测试电脑10.37.11.180。总部单臂部署，X友服务器是10.37.1.77。分支pc通过X友软件和总部的X友服务器做数据交互。</p>
<p><img src="/2019/06/11/访问X友软件卡顿/1.png" alt="1"></p>
<h2 id="2-排错操作："><a href="#2-排错操作：" class="headerlink" title="2.排错操作："></a>2.排错操作：</h2><ol>
<li><p>在分支客户端电脑开始访问X友前，在分支woc和总部woc的eth0口，vpntun口，wan口写下抓包命令。写完之后执行命令，之后再用电脑正式访问X友。看到现象后，等待几秒再停止所有接口的抓包。</p>
<p><img src="/2019/06/11/访问X友软件卡顿/2.png" alt="2"></p>
</li>
<li><p>其实在抓到上述6份比较漂亮的包之前，我还重复上述操作过几次。虽然时间比较久了，但是我看到自己有导出csv的后缀文件，估计是我那时候想通过比较几个文件中的ip.id来判断访问应用的时候是否存在丢包。估计那时候我没看出啥东西来，就纯浪费时间去了。</p>
<p><img src="/2019/06/11/访问X友软件卡顿/3.png" alt="3"></p>
</li>
<li><p>后来听说X友这种应用访问卡慢，是因为小包交互过多导致的。就试着打开了一个包fenzhieth0.pcap，然后输入过滤条件，来看下200字节以下的包有多少。emmmm一看占比57.6%呢，小包很多了很多了</p>
<p><img src="/2019/06/11/访问X友软件卡顿/4.png" alt="4"></p>
</li>
<li><p>于是脑补出理由，打电话给渠道。举个例子，访问X友打开软件要传输15000字节的数据，公网延时是20-30ms，比如小包只传100字节，那这15000字节的数据就要传输150次，时间上就是20ms*150，这样访问就会出现卡顿的情况。如果是用ftp等测试，每次传输是1000字节的话，就是传输15次，所以访问ftp服务器的时候你就不会觉得卡。所以这是X友那边发包机制的问题，和我们设备没有关系</p>
</li>
<li><p>渠道觉得好有道理，然后就信了，之后他去和客户解释就再也没找我了。工单关闭</p>
</li>
</ol>
<hr>
<h2 id="3-上述排错错在哪"><a href="#3-上述排错错在哪" class="headerlink" title="3.上述排错错在哪"></a>3.上述排错错在哪</h2><ol>
<li><p>自己想当然的瞎JB乱讲，同时基础概念不清晰，或者说是完全没有概念</p>
</li>
<li><p>在TCP中，发送方和接收方都会存在一个发送窗口和接受窗口。发送窗口表示我发送方一口气能发送多少数据，接收窗口表示我接收方还能接收多少数据放在缓存区中。发送方要尽量保证多发数据，同时也得保证接收方能接收的过来，不至于数据发生溢出。MSS是一个数据段的数据最大长度，那么发送窗口和MSS存在啥关系呢。刚刚说道，发送窗口表示我发送方一口气能发送多少数据，那么MSS的值就确定了，我要一口气发这么多数据要发出多少个包。举个例子来说，我发送方一口气能发送1000个字节，但是一个数据段的MSS是100字节，那么我一口气就能发10个包出去。</p>
</li>
<li><p>给渠道说的理由，看上去好像没问题。其实概念就没弄清。给渠道的说法表明，我的数据包是一个一个发出的，但是实际上TCP中不是这么传输数据的</p>
</li>
</ol>
<hr>
<h2 id="4-重新整理排错思路"><a href="#4-重新整理排错思路" class="headerlink" title="4.重新整理排错思路"></a>4.重新整理排错思路</h2><ol>
<li><p>访问一个应用卡慢，分两种情况。一个是网络问题，一个是设备性能问题。</p>
</li>
<li><p>ping测试是在网络层的测试。客户环境中ping测试不丢包不延时，基本上可以判断网络是没啥问题的</p>
</li>
<li><p>之前做了这么一个操作，把pcap文件导出成csv文件，想通过比较各个csv文件中是否存在丢包。但是没有看是什么东西来，而且上述操作比较耗时间。要知道的是，如果数据包丢失，就会导致重传或是有重复ACK。那我们是不是可以通过wireshark工具来自动分析下</p>
</li>
<li><p>先通过过滤条件，把测试电脑与服务器的互访流量给过滤处理</p>
<p><img src="/2019/06/11/访问X友软件卡顿/5.png" alt="5"></p>
</li>
<li><p>然后在把文件重新保存一份</p>
<p><img src="/2019/06/11/访问X友软件卡顿/6.png" alt="6"></p>
</li>
<li><p>先打开fenzhieth0这个包。过滤出客户端和服务器双向交互的流量</p>
</li>
<li><p>随机选择一个包，然后右键点击<strong>Follow</strong>—&gt;<strong>tcp stream</strong>，过滤出一个tcp连接的互访流量</p>
<p><img src="/2019/06/11/访问X友软件卡顿/7.png" alt="7"></p>
</li>
<li><p>然后点击<strong>统计</strong> <strong>statistics</strong>—&gt;<strong>TCP Stream Graphs</strong>—&gt;<strong>time sequence</strong> <strong>（stevens）</strong>，可以看到该连接，一个方向上的seq号增长情况</p>
<p><img src="/2019/06/11/访问X友软件卡顿/8.png" alt="8"></p>
</li>
<li><p>可以看到弹出下框，也就意味着。在该连接中，服务器到用户客户端方向的数据流增长过程中，有5s左右是卡住了。那我们通过Stevens图，可以找到卡住的2个点，包号分别是467号包与819号包</p>
<p><img src="/2019/06/11/访问X友软件卡顿/9.png" alt="9"></p>
</li>
<li><p>可以看到下图，服务器在等待客户端发送816号包。而816号包的发出，是在468号包发出之后耗时近6s。</p>
<p><img src="/2019/06/11/访问X友软件卡顿/10.png" alt="10"></p>
</li>
<li><p>后续又按上述操作，观察了其他的几个tcp连接，以及zongbueth0口的抓包情况。都是一模一样的，总会有几秒卡住</p>
</li>
<li><p>也就意味着，这是180这台客户端的问题</p>
</li>
<li><p>为什么会出现这种情况，这就是X友厂商应该去分析的了。因为这个是X友应用层层面的问题</p>
</li>
</ol>
<hr>
<h2 id="5-联想"><a href="#5-联想" class="headerlink" title="5.联想"></a>5.联想</h2><ul>
<li>为什么和我们设备无关了？ </li>
</ul>
<p>​       ——因为在woc的eth0口抓包，发现上图中468号包发出之后，隔了近6s才收到了816号包。我们设备都没做封装啥的操作呢，只是单纯接收包而已</p>
<ul>
<li>用woc开启加速后，会有效果吗？</li>
</ul>
<p>​        ——个人认为不会，因为woc开启后，是分支的woc设备和分支内网电脑做交互。把woc设备当做是总部的服务器，那内网客户端和woc交互数据的时候，依旧会出现上面这种情况，因为这种情况是在客户端电脑上发生的。要想解决，就得从客户端上看是什么原因导致了这6s的延时发包。</p>

      

      

          
        
          
        </div>

    </div>
    <footer class="article-footer">
      <a data-url="https://dilidonglong.github.io/2019/06/11/访问X友软件卡顿/" data-id="cjy4gbs2v000ho4qu797xlclz" class="article-share-link">分享</a>
      
    </footer>

  

  

  

</article>



      
  </article>
  
  
    <nav class="page-nav">
      
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
    </nav>
  
</section>
</div>

  <footer class="footer">
  
  <div class="outer">
    <div class="float-right">
      <ul class="list-inline">
  
    <li><i class="fe fe-smile-alt"></i> <span id="busuanzi_value_site_uv"></span></li>
  
</ul>
    </div>
    <ul class="list-inline">
      <li>&copy; 2019 望伊如西の博客</li>
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
      <li>Theme  <a href="https://github.com/zhwangart/hexo-theme-ocean">Ocean</a></li>
    </ul>
  </div>
</footer>

</main>
<aside class="sidebar">
  <button class="navbar-toggle"></button>

<nav class="navbar">
  
    <div class="logo">
      <a href="/"><img src="/images/hexo.svg" alt="望伊如西の博客"></a>
    </div>
  
  <ul class="nav nav-main">
    
      <li class="nav-item">
        <a class="nav-item-link" href="/">主页</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/categories">分类</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/gallery">相册</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/about">关于</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/archives">归档</a>
      </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="Search">
        <i class="fe fe-search"></i>
        搜索
      </a>
    </li>
  </ul>
</nav>

<nav class="navbar navbar-bottom">
  <ul class="nav">
      <li class="nav-item">
          <div class="totop" id="totop">
    <i class="fe fe-rocket"></i>
</div>
      </li>
    <li class="nav-item">
      
        <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
          <i class="fe fe-feed"></i>
        </a>
      
    </li>
  </ul>
</nav>

<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
</aside>
<script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>


  <script src="/fancybox/jquery.fancybox.min.js"></script>



  <script src="/js/search.js"></script>


<script src="/js/ocean.js"></script>

</body>
</html>