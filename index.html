<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  
    <meta name="keywords" content="network,linux">
  
  
    <meta name="description" content="兰芝生于幽谷，不以无人而不芳">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    
    望伊如西の博客</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">
  
  <script src="/js/pace.min.js"></script>
</head>
</html>
<body>
<main class="content">
  <section class="jumbotron">
  <div class="video">
    
      <div class="video-frame">
        <img src="/images/ocean/overlay-hero.png" alt="Decorative image frame">
      </div>
    
    <div class="video-media">
      <video playsinline autoplay loop muted data-autoplay poster="/images/ocean/ocean.png" x5-video-player-type="h5">
        <source src="/images/ocean/ocean.mp4" type="video/mp4">
        <source src="/images/ocean/ocean.ogv" type="video/ogg">
        <source src="/images/ocean/ocean.webm" type="video/webm">
        <p>Your user agent does not support the HTML5 Video element.</p>
      </video>
      <div class="video-overlay"></div>
    </div>
    <div class="video-inner text-center text-white">
      <h1><a href="/">望伊如西の博客</a></h1>
      <p>兰芝生于幽谷，不以无人而不芳</p>
      <div><img src="/images/hexo-inverted.svg" class="brand" alt="望伊如西の博客"></div>
    </div>
    <div class="video-learn-more">
      <a class="anchor" href="#landingpage"><i class="fe fe-mouse"></i></a>
    </div>
  </div>
</section>

<div id="landingpage">
  <section class="outer">
  <article class="articles">
    
    <h1 class="page-type-title"></h1>

    
      
        <article id="post-如何在SEED-Ubuntu-VM上运行VirtualBox？" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/">如何使用VirtualBox运行SEED_Ubuntu_VM？</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/" class="article-date">
  <time datetime="2019-09-07T15:49:44.000Z" itemprop="datePublished">2019-09-07</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/SEED-Labs/">SEED Labs</a>
  </div>

      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <h1 id="如何使用VirtualBox运行SEED-Ubuntu-VM？"><a href="#如何使用VirtualBox运行SEED-Ubuntu-VM？" class="headerlink" title="如何使用VirtualBox运行SEED_Ubuntu_VM？"></a>如何使用VirtualBox运行SEED_Ubuntu_VM？</h1><p><a href="https://seedsecuritylabs.org/Labs_16.04/Documents/SEEDVM_VirtualBoxManual.pdf" target="_blank" rel="noopener">官方原文档</a></p>
<p>Install the free VirtualBox software first. We recommend <strong>Version 6.0.4</strong> (please stay away from the newer versions, as they still have some issues with our VM).</p>
<p>首先安装免费的VirtualBox软件。 我们建议使用版本6.0.4（请远离新版本，因为它们仍然存在我们的VM的一些问题）。</p>
<p><br></p>
<h2 id="Step-1-Create-a-New-VM-in-VirtualBox"><a href="#Step-1-Create-a-New-VM-in-VirtualBox" class="headerlink" title="Step 1: Create a New VM in VirtualBox"></a>Step 1: Create a New VM in VirtualBox</h2><p>步骤1：在VirtualBox中创建一个新的VM</p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/1.jpg" alt="1"></p>
<p><br></p>
<h2 id="Step-2-Provide-a-Name-and-Select-the-OS-Type-and-Version"><a href="#Step-2-Provide-a-Name-and-Select-the-OS-Type-and-Version" class="headerlink" title="Step 2: Provide a Name and Select the OS Type and Version"></a>Step 2: Provide a Name and Select the OS Type and Version</h2><p>步骤2：进行命名，同时选择操作系统的类型与版本</p>
<p>Do NOT pick Ubuntu (64-bit), even though your machine is 64 bit. Our prebuilt VM is 32-bit Ubuntu.</p>
<p>不要选择Ubuntu (64-bit)，尽管你的机器是64位的。我们预建的VM是32位的Ubuntu。</p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/2.png" alt="1"></p>
<p><br></p>
<h2 id="Step-3-Set-the-Memory-Size"><a href="#Step-3-Set-the-Memory-Size" class="headerlink" title="Step 3: Set the Memory Size"></a>Step 3: Set the Memory Size</h2><p>步骤3：设置内存容量</p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/3.jpg" alt="1"></p>
<p><br></p>
<h2 id="Step-4-Select-the-Pre-built-VM-File-Provided-by-Us"><a href="#Step-4-Select-the-Pre-built-VM-File-Provided-by-Us" class="headerlink" title="Step 4: Select the Pre-built VM File Provided by Us"></a>Step 4: Select the Pre-built VM File Provided by Us</h2><p>步骤4： 选择使用我们提供的预建的VM文件</p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/4.jpg" alt="1"></p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/5.jpg" alt="1"></p>
<p><br></p>
<h2 id="In-the-above-step-you-may-encounter-遭遇-the-following-error-otherwise-directly-go-to-Step-5"><a href="#In-the-above-step-you-may-encounter-遭遇-the-following-error-otherwise-directly-go-to-Step-5" class="headerlink" title="In the above step, you may encounter(遭遇) the following error; otherwise, directly go to Step 5."></a>In the above step, you may encounter(遭遇) the following error; otherwise, directly go to Step 5.</h2><p>在上面的步骤中，你可能会遇到以下错误; 如果没有，则直接转到步骤5。</p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/6.jpg" alt="1"></p>
<p><strong>Reason and Solution:</strong> This is because you copied the VM files from another VM, which is already loaded into VirtualBox. These two VMs have the same UUID, which is not allowed by Virtualbox. Here are several solutions depending on your situations:</p>
<p><strong>原因和解决方法：</strong>这是因为你从其他VM复制VM文件，而这个VM已经被加载过VirtualBox中了。这两个VM有着同样的UUID，而在VirtualBox中是不允许这样的。取决于你的状况，有以下几个解决方案：</p>
<ul>
<li>If you plan to create multiple VMs using the same image, please use the clone<br>mechanism (See Appendix A for details).</li>
<li>如果你使用相同的镜像创建多个VM，请使用克隆机制（更多细节请参考附录A）</li>
<li>If the older VM with the same UUID is no longer needed, remove it from VirtualBox will solve the problem.</li>
<li>如果不再需要具有相同UUID的旧的VM，则从VirtualBox中删除它可以解决问题。</li>
<li>If you do want to keep the older VM, you can change the UUID of the new VM. The fastest way is to directly modify SEEDUbuntu16.04.vmdk, which is a text file. Search for the ddb.uuid.image entry, and change its value (e.g., change the last byte from ‘d’ to ‘e’)</li>
<li>如果你确实想要保留旧的VM，你可以为新的VM修改UUID。 最快的方法是直接修改SEEDUbuntu16.04.vmdk，这是一个文本文件。 搜索ddb.uuid.image条目，并更改其值（例如，将最后一个字节从“d”更改为“e”）</li>
</ul>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/7.jpg" alt="1"></p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/8.jpg" alt="1"></p>
<p>If there is no error (or after you fix the error), your VM will be created successfully.</p>
<p>如果没有出现错误（或是你已经修复了错误），你的VM将成功创建。</p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/9.jpg" alt="1"></p>
<p><br></p>
<h2 id="Step-5-Configure-the-VM"><a href="#Step-5-Configure-the-VM" class="headerlink" title="Step 5: Configure the VM"></a>Step 5: Configure the VM</h2><p>步骤5：配置VM</p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/10.jpg" alt="1"></p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/11.jpg" alt="1"></p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/12.jpg" alt="1"></p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/13.jpg" alt="1"></p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/14.jpg" alt="1"></p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/15.jpg" alt="1"></p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/16.jpg" alt="1"></p>
<p><br></p>
<h2 id="Step-6-Start-the-VM"><a href="#Step-6-Start-the-VM" class="headerlink" title="Step 6: Start the VM"></a>Step 6: Start the VM</h2><p>步骤6：启动VM</p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/17.jpg" alt="1"><em>**</em></p>
<p><br></p>
<h2 id="Step-7-Stop-the-VM-or-Save-the-VM’s-State"><a href="#Step-7-Stop-the-VM-or-Save-the-VM’s-State" class="headerlink" title="Step 7: Stop the VM or Save the VM’s State"></a>Step 7: Stop the VM or Save the VM’s State</h2><p>步骤7：停止VM或是保存VM的状态</p>
<p>When you are done with your VM, you can always shut it down (from inside Ubuntu). A better alternative is to “freeze” the computer, so everything is saved. When you need it again, you can “unfreeze” it, and resume from where you left off. This is much faster and convenient than shutting down and rebooting the VM. To achieve this, you can use the “Save State” option.</p>
<p>用完VM后，你可以随时关闭它（从Ubuntu内部）。 更好的选择是“freeze冻结”计算机，以便保存所有内容。 当你再次需要它时，你可以“unfreeze解冻”它，并从你离开的地方恢复。 这比关闭和重新启动VM快得多，方便快捷。 为此，你可以使用“Save State保存状态”选项。</p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/18.jpg" alt="1"></p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/19.jpg" alt="1"></p>
<p><br></p>
<h1 id="Appendix-A-Use-“Clone”-to-create-Multiple-VMs"><a href="#Appendix-A-Use-“Clone”-to-create-Multiple-VMs" class="headerlink" title="Appendix A: Use “Clone” to create Multiple VMs"></a>Appendix A: Use “Clone” to create Multiple VMs</h1><p>附录A：使用“克隆”以创建多个VM</p>
<p>Some SEED labs require multiple VMs. The easiest way to create multiple VMs is to create one first, and then use the “Clone” mechanism to clone it. Before doing the cloning, please ensure the following:</p>
<p>一些SEED实验需要多个VM。 创建多个VM的最简单方法是首先创建一个，然后使用“克隆”机制来克隆它。 在进行克隆之前，请确保以下内容：</p>
<ul>
<li><p><strong>IMPORTANT:</strong> make sure that the VM is <strong>fully shutdown</strong> (not in a “Saved” state), or there will be all sorts of problems.</p>
<p><strong>重要：</strong>确保你的VM已经<strong>完全关闭</strong>（而不是处于“保存状态”），不然可能会有各种各样的问题。</p>
</li>
<li><p>Configure network (see Appendix B); otherwise you have to do it for each VM.</p>
<p>配置网络（参考附录B）；不然你就得为每个VM配置它了。</p>
</li>
<li><p>Configure folder sharing (see Appendix D); otherwiseyou have to do it for each VM.</p>
<p>配置文件夹共享（参考附录B）；不然你就得为每个VM配置它了。</p>
</li>
</ul>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/20.jpg" alt="1"></p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/21.jpg" alt="1"></p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/22.jpg" alt="1"></p>
<p>The clone will take a few minutes, depending on the speed of your computer.</p>
<p>克隆将会持续几分钟，这取决于你的电脑。</p>
<p><br></p>
<h1 id="Appendix-B-Network-Configuration-in-VirtualBox-for-SEED-Labs"><a href="#Appendix-B-Network-Configuration-in-VirtualBox-for-SEED-Labs" class="headerlink" title="Appendix B: Network Configuration in VirtualBox for SEED Labs"></a>Appendix B: Network Configuration in VirtualBox for SEED Labs</h1><p>附录B：为SEED实验在VirtualBox上配置网络</p>
<p>In many of the SEED labs, we need to run multiple guest VMs, and these VMs should be able to (1) reach out to the Internet, (2) communicate with each other. In Virtualbox, if we use the “NAT” setting (default setting) for each VM, we can achieve 1, but not 2, because each VM will be placed in its own private network, not on a common one; they even have the same IP address, which is not a problem because each VM is the only computer on its own private network. On the other hand, if we use the “Host-only” setting for each VM, we can achieve 2, but not 1. Using this setting, all the VMs and the host will be put on a common network, so they can communicate with each other; however, due to the lack of NAT, the VMs cannot reach out to the outside.</p>
<p>在许多SEED实验中，我们需要运行多个客户虚拟机，这些虚拟机应该能够（1）接入互联网，（2）相互通信。在Virtualbox中，如果我们为每个VM使用“NAT”设置（默认设置），我们可以实现1而不是2，因为每个VM将放置在自己的专用网络中，而不是普通的网络中;它们甚至具有相同的IP地址，这不是问题，因为每个VM是其自己的专用网络上唯一的计算机。另一方面，如果我们为每个VM使用“仅主机”的设置，我们可以实现2但不能达到1.使用此设置，所有VM和主机将被放在一个公共网络上，因此它们可以进行通信彼此;但是，由于缺少NAT，虚拟机无法与外界联系。</p>
<p>Therefore, in order to achieve all these 2 goals, we have to use a network adapter called “NAT Network”. The adapter works in a similar way to “local area network” or LAN. It enable VMs communication within same local network as well as the communication to the internet. All the communication goes through this single adapter. As show in Figure 1, gateway router transfers the packets among the VMs and transfers the packets from local network to Internet.</p>
<p>因此，为了同时实现这两个目标，我们必须使用称为“NAT网络”的网络适配器。适配器的工作方式与“局域网”或LAN类似。它支持在同一本地网络内进行VM通信以及与Internet的通信。所有通信都通过这个单一适配器。如图1所示，网关路由器在VM之间传输数据包，并将数据包从本地网络传输到Internet。</p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/23.jpg" alt="1"></p>
<p><br></p>
<h2 id="Configuration-Instruction"><a href="#Configuration-Instruction" class="headerlink" title="Configuration Instruction"></a>Configuration Instruction</h2><p>配置介绍</p>
<p><strong>Step 1</strong>: Make sure you are using the most up-to-date VirtualBox. As show in the following figure, click the “File” on the top left of the VirtualBox main UI. Then choose “Preferences…” option.</p>
<p><strong>步骤1：</strong>确保您使用的是最新的VirtualBox。 如下图所示，单击VirtualBox主UI左上角的“文件”。 然后选择“首选项…”选项。</p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/24.png" alt="1"></p>
<p><strong>Step 2</strong>: Click the “Network” tab on left panel. click the “+” button to create a new NAT Networks (NatNetwork) adaptor (if one does not exist). Double click on the NatNetwork, and look at its specifications. Set the specifications as the same as what is shown below.</p>
<p><strong>步骤2：</strong>点击左侧栏中的“网络”键。点击“+”号按钮以创建一个新的NAT网络适配器（如果一个都没有的话）。双击这个NatNetwork，并且查看它的格式规范，照下图的配置来进行设置。</p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/25.png" alt="1"></p>
<p><strong>Step 4</strong>: Go to VM setting, you need to power off the VM before making the following changes. Enable Adapter 1(at the same time, disable the other adapters), and choose “NAT Network”.</p>
<p><strong>步骤4</strong>：回到VM的设置，你需要确保在做以下操作的前已经对VM完全关机。开启适配器1（与此同时关闭其他适配器），并且选择“NAT网络”。</p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/26.jpg" alt="1"></p>
<p><strong>Step 5</strong>: Now power on the VM, and check the IP address.</p>
<p><strong>步骤5：</strong>现在开启VM，并且检查IP地址</p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/27.jpg" alt="1"></p>
<p><strong>Troubleshooting</strong>:</p>
<p>If VMs can not ping each other, refresh the MAC Address can resolve the issue. The way to resolve the issue is shown in figure 4, troubleshoot 1.</p>
<p>如果VM之间无法互相ping通，重新获取MAC地址能解决该问题。解决问题的方法在上面步骤4，点击那个</p>
<p>troubleshoot 1。</p>
<p><br></p>
<h1 id="Appendix-C-Take-Snapshots-and-Recover-from-Snapshots"><a href="#Appendix-C-Take-Snapshots-and-Recover-from-Snapshots" class="headerlink" title="Appendix C: Take Snapshots and Recover from Snapshots"></a>Appendix C: Take Snapshots and Recover from Snapshots</h1><p>附录C：创建快照与从快照中恢复</p>
<p>For some labs, you may need to make changes to the operating system. If you make a severe mistake, your VM may not be able to boot up again, and you will lost everything inside the failed VM. have done. To avoid such trouble, before doing anything dangerous to the OS, it is better to take a snapshot of your current VM. You can take as many snapshots as you want.</p>
<p>对于一些实验，你可能需要对操作系统做出改变。如果你的操作导致服务器出现问题，你的VM可能无法再次启动了，并且你将丢失在这个故障VM中的所有内容。在对操作系统做任何危险操作前，为了避免上述问题出现，最好就是对当前的VM创建快照。只要你想，你能创建任意个数量的快照。</p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/28.png" alt="1"></p>
<p>To restore from a snapshot that you have taken before, you can click the followings (you need to shut-down the VM first):</p>
<p>要从之前拍摄的快照还原，可以单击以下内容（你需要先关闭VM）：</p>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/29.png" alt="1"></p>
<p><br></p>
<h1 id="Appendix-D-Folder-Sharing"><a href="#Appendix-D-Folder-Sharing" class="headerlink" title="Appendix D: Folder Sharing"></a>Appendix D: Folder Sharing</h1><p>附录D：文件夹分享</p>
<p>Files can be shared between the host computer and the guest operating system in VirtualBox. The following steps show how to do so.</p>
<p>在主机电脑和VirtualBox中的客户操作系统间，文件是可以共享的。以下步骤将告诉你如何去做。</p>
<ol>
<li><p>Create the folder to be shared on the host computer. In this tutorial we name the folder share.</p>
<p>在主机电脑上创建一个用于共享的文件夹。在本教程中，我们给文件夹取名叫share。</p>
</li>
<li><p>Boot the Guest operating system in VirtualBox.</p>
<p>在VirtualBox中启动用户操作系统。</p>
</li>
<li><p>Go to the Settings popup window, and select “Shared Folders”</p>
<p>回到设置弹出窗口，并选择“分享文件夹”。</p>
</li>
</ol>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/30.jpg" alt="1"></p>
<ol start="4">
<li><p>Choose the ‘Add’ button.</p>
<p>选择“添加”按钮。</p>
</li>
</ol>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/31.jpg" alt="1"></p>
<ol start="5">
<li><p>Choose “Other …”, and select a folder from the popup window.</p>
<p>选择“其他……”，并从弹出窗口中选择文件夹。</p>
</li>
</ol>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/32.jpg" alt="1"></p>
<ol start="6">
<li><p>Select <strong>Auto Mount</strong> and <strong>Make Permanent</strong> option. Click OK. Click OK again to close the Settings Dialog.</p>
<p>选择<strong>动态挂载</strong>和<strong>Make Permanent（常设，永久）</strong> 选项。点击完成。再次点击完成以关闭设置对话框。</p>
</li>
</ol>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/33.jpg" alt="1"></p>
<ol start="7">
<li><p>Open a terminal in the VM. Make a directory and name it host (you can choose any name you like). Use command “mkdir /home/seed/host”</p>
<p>打开VM中的终端，创建一个目录并将其命名为host（你可以选择任何您喜欢的名称）。使用命令“mkdir /home/seed/host”（因为上面那张图的挂载目录写的就是这个文件夹地址，所以你也得确保在VM中创建了这个文件夹）</p>
</li>
<li><p>We want files in our mount point (~/host) to be owned by the current user. Also we want the mounted shared folder to persist after reboot. Hence, we will edit the /etc/rc.local file (using “sudo gedit /etc/rc.local”) and add the command below (1000 is the User ID and group ID of the user seed):</p>
<p>我们希望挂载点（〜/ host）中的文件归当前用户所有。 此外，我们希望挂载的共享文件夹在重新启动后保持不变。 因此，我们将编辑 /etc/rc.local文件（使用“sudo gedit /etc/rc.local”）并添加以下命令（1000是用户ID和用户种子的组ID）：</p>
<p><strong>sudo mount -t vboxsf -o rw,uid=1000,gid=1000 share /home/seed/host</strong></p>
</li>
</ol>
<p><img src="/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/34.jpg" alt="1"></p>
<ol start="9">
<li><p>Save the changes and reboot VM. Now anything placed in /home/seed/host inside the VM should be visible from the share folder on the host machine, and vice versa.</p>
<p>保存更改并重启VM。 现在，从主机上的共享文件夹中可以看到放在VM中/home/seed/host中的任何内容，反之亦然。</p>
</li>
</ol>

      

      

          
        
          
        </div>

    </div>
    <footer class="article-footer">
      <a data-url="https://dilidonglong.github.io/2019/09/07/如何在SEED-Ubuntu-VM上运行VirtualBox？/" data-id="ck09sgnhy00094ovdilsz8fwz" class="article-share-link">分享</a>
      
    </footer>

  

  

  

</article>



      
        <article id="post-markdown语法" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/08/11/markdown语法/">markdown语法</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/08/11/markdown语法/" class="article-date">
  <time datetime="2019-08-11T14:09:25.000Z" itemprop="datePublished">2019-08-11</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/小技巧/">小技巧</a>
  </div>

      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <h1 id="插入数学公式"><a href="#插入数学公式" class="headerlink" title="插入数学公式"></a>插入数学公式</h1><p>在Markdown中插入数学公式的语法是<code>$数学公式$</code>和<code>$$数学公式$$</code>。</p>
<p><strong>行内公式</strong>是可以让公式在文中与文字或其他东西混编，不独占一行。</p>
<ul>
<li><p><strong>示例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">质能方程$E = mc^2$</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>显示</strong></p>
<blockquote>
<p>质能方程$E=mc^2$</p>
</blockquote>
</li>
</ul>
<p><strong>独立公式</strong>使公式单独占一行，不与文中其他文字等混编。</p>
<ul>
<li><p><strong>示例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">质能方程$$E = mc^2$$</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>显示</strong></p>
<blockquote>
<p>质能方程</p>
<p>$$E=mc^2$$</p>
</blockquote>
</li>
</ul>
<h1 id="普通公式"><a href="#普通公式" class="headerlink" title="普通公式"></a>普通公式</h1><p>普通的加减乘除数学公式的输入方法与平常的书写一样。</p>
<ul>
<li><p><strong>示例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$$x = 100 * y + z - 10 / 33 + 10$$</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>显示</strong></p>
<blockquote>
<p>$$x=100∗y+z−10/33+10$$</p>
</blockquote>
</li>
</ul>
<h1 id="上下标"><a href="#上下标" class="headerlink" title="上下标"></a>上下标</h1><p>使用<code>^</code>来表示上标，<code>_</code>来表示下标，同时如果上下标的内容多于一个字符，可以使用<code>{}</code>来将这些内容括起来当做一个整体。<br>与此同时，上下标是可以嵌套的。</p>
<ul>
<li><p><strong>示例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$$x = a_&#123;1&#125;^n + a_&#123;2&#125;^n + a_&#123;3&#125;^n$$</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>显示</strong></p>
<blockquote>
<p>$$x = a_{1}^n + a_{2}^n + a_{3}^n$$</p>
</blockquote>
</li>
</ul>
<p>如果希望左右两边都能有上下标，可以使用<code>\sideset</code>语法</p>
<ul>
<li><p><strong>示例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$$\sideset&#123;^1_2&#125;&#123;^3_4&#125;A$$</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>显示</strong></p>
<blockquote>
<p>$$\sideset{^1_2}{^3_4}A$$</p>
</blockquote>
</li>
</ul>
<h1 id="括号"><a href="#括号" class="headerlink" title="括号"></a>括号</h1><p><code>()</code>，<code>[]</code>和<code>|</code>都表示它们自己，但是<code>{}</code>因为有特殊作用因此当需要显示大括号时一般使用<code>\lbrace \rbrace</code>来表示。</p>
<ul>
<li><p><strong>示例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$$f(x, y) = 100 * \lbrace[(x + y) * 3] - 5\rbrace$$</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>显示</strong></p>
<blockquote>
<p>$$f(x, y) = 100 <em> \lbrace[(x + y) </em> 3] - 5\rbrace$$</p>
</blockquote>
</li>
</ul>
<h1 id="分数"><a href="#分数" class="headerlink" title="分数"></a>分数</h1><p>分数使用<code>\frac{分母}{分子}</code>这样的语法，不过推荐使用<code>\cfrac</code>来代替<code>\frac</code>，显示公式不会太挤。</p>
<ul>
<li><p><strong>示例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$$\frac&#123;1&#125;&#123;3&#125; 与 \cfrac&#123;1&#125;&#123;3&#125;$$</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>显示</strong></p>
<blockquote>
<p>$$\frac{1}{3} 与 \cfrac{1}{3}$$</p>
</blockquote>
</li>
</ul>
<h1 id="开方"><a href="#开方" class="headerlink" title="开方"></a>开方</h1><p>开方使用<code>\sqrt[次数]{被开方数}</code>这样的语法</p>
<ul>
<li><p><strong>示例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$$\sqrt[3]&#123;X&#125;$$</span><br><span class="line">$$\sqrt&#123;5 - x&#125;$$</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>显示</strong></p>
<blockquote>
<p>$$\sqrt[3]{X}$$<br>$$\sqrt{5 - x}$$</p>
</blockquote>
</li>
</ul>
<h1 id="希腊字母"><a href="#希腊字母" class="headerlink" title="希腊字母"></a>希腊字母</h1><p>见下表</p>
<table>
<thead>
<tr>
<th>代码</th>
<th>大写</th>
<th>代码</th>
<th>小写</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>A</code></td>
<td>A</td>
<td><code>\alpha</code></td>
<td>α</td>
</tr>
<tr>
<td><code>B</code></td>
<td>B</td>
<td><code>\beta</code></td>
<td>β</td>
</tr>
<tr>
<td><code>\Gamma</code></td>
<td>Γ</td>
<td><code>\gamma</code></td>
<td>γ</td>
</tr>
<tr>
<td><code>\Delta</code></td>
<td>Δ</td>
<td><code>\delta</code></td>
<td>δ</td>
</tr>
<tr>
<td><code>E</code></td>
<td>E</td>
<td><code>\epsilon</code></td>
<td>ϵ</td>
</tr>
<tr>
<td><code>Z</code></td>
<td>Z</td>
<td><code>\zeta</code></td>
<td>ζ</td>
</tr>
<tr>
<td><code>H</code></td>
<td>H</td>
<td><code>\eta</code></td>
<td>η</td>
</tr>
<tr>
<td><code>\Theta</code></td>
<td>Θ</td>
<td><code>\theta</code></td>
<td>θ</td>
</tr>
<tr>
<td><code>I</code></td>
<td>I</td>
<td><code>\iota</code></td>
<td>ι</td>
</tr>
<tr>
<td><code>K</code></td>
<td>K</td>
<td><code>\kappa</code></td>
<td>κ</td>
</tr>
<tr>
<td><code>\Lambda</code></td>
<td>Λ</td>
<td><code>\lambda</code></td>
<td>λ</td>
</tr>
<tr>
<td><code>M</code></td>
<td>M</td>
<td><code>\mu</code></td>
<td>μ</td>
</tr>
<tr>
<td><code>N</code></td>
<td>N</td>
<td><code>\nu</code></td>
<td>ν</td>
</tr>
<tr>
<td><code>\Xi</code></td>
<td>Ξ</td>
<td><code>\xi</code></td>
<td>ξ</td>
</tr>
<tr>
<td><code>O</code></td>
<td>O</td>
<td><code>\omicron</code></td>
<td>ο</td>
</tr>
<tr>
<td><code>\Pi</code></td>
<td>Π</td>
<td><code>\pi</code></td>
<td>π</td>
</tr>
<tr>
<td><code>P</code></td>
<td>P</td>
<td><code>\rho</code></td>
<td>ρ</td>
</tr>
<tr>
<td><code>\Sigma</code></td>
<td>Σ</td>
<td><code>\sigma</code></td>
<td>σ</td>
</tr>
<tr>
<td><code>T</code></td>
<td>T</td>
<td><code>\tau</code></td>
<td>τ</td>
</tr>
<tr>
<td><code>\Upsilon</code></td>
<td>Υ</td>
<td><code>\upsilon</code></td>
<td>υ</td>
</tr>
<tr>
<td><code>\Phi</code></td>
<td>Φ</td>
<td><code>\phi</code></td>
<td>ϕ</td>
</tr>
<tr>
<td><code>X</code></td>
<td>X</td>
<td><code>\chi</code></td>
<td>χ</td>
</tr>
<tr>
<td><code>\Psi</code></td>
<td>Ψ</td>
<td><code>\psi</code></td>
<td>ψ</td>
</tr>
<tr>
<td><code>\Omega</code></td>
<td>Ω</td>
<td><code>\omega</code></td>
<td>ω</td>
</tr>
</tbody>
</table>
<h1 id="其他字符"><a href="#其他字符" class="headerlink" title="其他字符"></a>其他字符</h1><h2 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h2><table>
<thead>
<tr>
<th>符号</th>
<th>代码</th>
</tr>
</thead>
<tbody>
<tr>
<td>±</td>
<td><code>\pm</code></td>
</tr>
<tr>
<td>×</td>
<td><code>\times</code></td>
</tr>
<tr>
<td>÷</td>
<td><code>\div</code></td>
</tr>
<tr>
<td>∣</td>
<td><code>\mid</code></td>
</tr>
<tr>
<td>∤</td>
<td><code>\nmid</code></td>
</tr>
<tr>
<td>⋅</td>
<td><code>\cdot</code></td>
</tr>
<tr>
<td>∘</td>
<td><code>\circ</code></td>
</tr>
<tr>
<td>∗</td>
<td><code>\ast</code></td>
</tr>
<tr>
<td>⨀</td>
<td><code>\bigodot</code></td>
</tr>
<tr>
<td>⨂</td>
<td><code>\bigotimes</code></td>
</tr>
<tr>
<td>⨁</td>
<td><code>\bigoplus</code></td>
</tr>
<tr>
<td>≤</td>
<td><code>\leq</code></td>
</tr>
<tr>
<td>≥</td>
<td><code>\geq</code></td>
</tr>
<tr>
<td>≠</td>
<td><code>\neq</code></td>
</tr>
<tr>
<td>≈</td>
<td><code>\approx</code></td>
</tr>
<tr>
<td>≡</td>
<td><code>\equiv</code></td>
</tr>
<tr>
<td>∑</td>
<td><code>\sum</code></td>
</tr>
<tr>
<td>∏</td>
<td><code>\prod</code></td>
</tr>
<tr>
<td>∐</td>
<td><code>\coprod</code></td>
</tr>
</tbody>
</table>
<h2 id="集合运算符"><a href="#集合运算符" class="headerlink" title="集合运算符"></a>集合运算符</h2><table>
<thead>
<tr>
<th>符号</th>
<th>代码</th>
</tr>
</thead>
<tbody>
<tr>
<td>∅</td>
<td><code>\emptyset</code></td>
</tr>
<tr>
<td>∈</td>
<td><code>\in</code></td>
</tr>
<tr>
<td>∉</td>
<td><code>\notin</code></td>
</tr>
<tr>
<td>⊂</td>
<td><code>\subset</code></td>
</tr>
<tr>
<td>⊃</td>
<td><code>\supset</code></td>
</tr>
<tr>
<td>⊆</td>
<td><code>\subseteq</code></td>
</tr>
<tr>
<td>⊇</td>
<td><code>\supseteq</code></td>
</tr>
<tr>
<td>⋂</td>
<td><code>\bigcap</code></td>
</tr>
<tr>
<td>⋃</td>
<td><code>\bigcup</code></td>
</tr>
<tr>
<td>⋁</td>
<td><code>\bigvee</code></td>
</tr>
<tr>
<td>⋀</td>
<td><code>\bigwedge</code></td>
</tr>
<tr>
<td>⨄</td>
<td><code>\biguplus</code></td>
</tr>
<tr>
<td>⨆</td>
<td><code>\bigsqcup</code></td>
</tr>
</tbody>
</table>
<h2 id="对数运算符"><a href="#对数运算符" class="headerlink" title="对数运算符"></a>对数运算符</h2><table>
<thead>
<tr>
<th>符号</th>
<th>代码</th>
</tr>
</thead>
<tbody>
<tr>
<td>log</td>
<td><code>\log</code></td>
</tr>
<tr>
<td>lg</td>
<td><code>\lg</code></td>
</tr>
<tr>
<td>ln</td>
<td><code>\ln</code></td>
</tr>
</tbody>
</table>
<h2 id="三角运算符"><a href="#三角运算符" class="headerlink" title="三角运算符"></a>三角运算符</h2><table>
<thead>
<tr>
<th>符号</th>
<th>代码</th>
</tr>
</thead>
<tbody>
<tr>
<td>⊥</td>
<td><code>\bot</code></td>
</tr>
<tr>
<td>∠</td>
<td><code>\angle</code></td>
</tr>
<tr>
<td>sin</td>
<td><code>\sin</code></td>
</tr>
<tr>
<td>cos</td>
<td><code>\cos</code></td>
</tr>
<tr>
<td>tan</td>
<td><code>\tan</code></td>
</tr>
<tr>
<td>cot</td>
<td><code>\cot</code></td>
</tr>
<tr>
<td>sec</td>
<td><code>\sec</code></td>
</tr>
<tr>
<td>csc</td>
<td><code>\csc</code></td>
</tr>
</tbody>
</table>
<h2 id="微积分运算符"><a href="#微积分运算符" class="headerlink" title="微积分运算符"></a>微积分运算符</h2><table>
<thead>
<tr>
<th>符号</th>
<th>代码</th>
</tr>
</thead>
<tbody>
<tr>
<td>′</td>
<td><code>\prime</code></td>
</tr>
<tr>
<td>∫</td>
<td><code>\int</code></td>
</tr>
<tr>
<td>∬</td>
<td><code>\iint</code></td>
</tr>
<tr>
<td>∭</td>
<td><code>\iiint</code></td>
</tr>
<tr>
<td>∬∬</td>
<td><code>\iiiint</code></td>
</tr>
<tr>
<td>∮</td>
<td><code>\oint</code></td>
</tr>
<tr>
<td>lim</td>
<td><code>\lim</code></td>
</tr>
<tr>
<td>∞</td>
<td><code>\infty</code></td>
</tr>
<tr>
<td>∇</td>
<td><code>\nabla</code></td>
</tr>
<tr>
<td>d</td>
<td><code>\mathrm{d}</code></td>
</tr>
</tbody>
</table>

      

      

          
        
          
        </div>

    </div>
    <footer class="article-footer">
      <a data-url="https://dilidonglong.github.io/2019/08/11/markdown语法/" data-id="ck09sgnhn00024ovds4gluplk" class="article-share-link">分享</a>
      
    </footer>

  

  

  

</article>



      
        <article id="post-grep-正则表达式-awk-sed" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/08/11/grep-正则表达式-awk-sed/">grep/正则表达式/awk/sed</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/08/11/grep-正则表达式-awk-sed/" class="article-date">
  <time datetime="2019-08-11T13:30:15.000Z" itemprop="datePublished">2019-08-11</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <p>Linux三剑客</p>
<p>grep适合单纯的查找或是匹配文本</p>
<p>sed适合编辑我们查找到的文本</p>
<p>awk对于查找到的文本，可以进行格式化处理，即输出成我们想要看到的样子</p>
<p>正则表达式是公式。我们可以在三剑客中按（正则表达式）条件查找到我们需要的东西</p>
<h2 id="1-grep"><a href="#1-grep" class="headerlink" title="1.grep"></a>1.<a href="http://www.zsythink.net/archives/1733" target="_blank" rel="noopener">grep</a></h2><p>grep（global search regular expression and print out the line）</p>
<ul>
<li>grep  “需要搜索的字符”</li>
<li>grep  -i  “需要搜索的字符”               不区分大小写</li>
<li>grep  -n  “需要搜索的字符”              在行首显示字符所在行号</li>
<li>grep  –color=auto  “需要搜索的字符”           字符用颜色显示</li>
<li>grep  –color  “需要搜索的字符”           字符用颜色显示</li>
<li>grep  -c  “需要搜索的字符”            显示字符一共所在多少行</li>
<li>grep  -o  “需要搜索的字符”           显示字符，在单独的一行输出</li>
<li>grep  -Bx  “需要搜索的字符”           显示字符所在的行及其前x行</li>
<li>grep  -Ax  “需要搜索的字符”           显示字符所在的行及其后x行</li>
<li>grep  -Cx  “需要搜索的字符”           显示字符所在的行及其前后x行</li>
<li>grep  -w  “需要搜索的字符”          精确显示字符所在的行，比如字符是abc，就不会显示abcd所在行</li>
<li>grep  -v  “需要搜索的字符”           显示不包含该字符所在的行</li>
<li>grep  -e  “需要搜索的字符”  -e  “需要搜索的字符2”            显示多个目标字符所在行</li>
</ul>
<hr>
<h2 id="2-正则表达式"><a href="#2-正则表达式" class="headerlink" title="2.正则表达式"></a>2.正则表达式</h2><h3 id="2-1基本正则表达式"><a href="#2-1基本正则表达式" class="headerlink" title="2.1基本正则表达式"></a>2.1基本正则表达式</h3><p>grep  “^hello”             打印出以hello开头的行</p>
<p>grep  “hello$”             打印出以hello结尾的行</p>
<p>grep  “^hello$”             打印出只有hello单词的行</p>
<p>grep  “^$”                    打印出空行，该行中有空格也不能算是一个空行</p>
<p>grep  “\ &lt; hello”          打印出以hello作为一个单词词首的一行</p>
<p>grep  “hello\ &gt;”          打印出以hello作为一个单词词尾的一行</p>
<p>grep  “\ &lt; hello\ &gt;”          打印出以hello作为一个单词的一行</p>
<p>同时可以使用\ b来表示锚定词首或词尾，即来替代\ &gt;和\ &lt;</p>
<p>使用\ B可以表示词首或词尾不是某个单词</p>
<hr>
<h4 id="连续次数的匹配"><a href="#连续次数的匹配" class="headerlink" title="连续次数的匹配"></a><a href="http://www.zsythink.net/archives/1893" target="_blank" rel="noopener">连续次数的匹配</a></h4><p>grep  “a\ {3\ }”           打印出单词中有3个连续a的一行</p>
<p>grep  “\ &lt; a\ {3\ } \ &gt;”           打印出单词中<strong>只有</strong>3个连续a的一行（以连续3个a作为一个单词）</p>
<p>grep  “a\ {2,4\ } “           打印出单词中至少有连续2个a或最多连续4个a的一行</p>
<p>grep  “a\ { ,4\ } “           打印出单词中最多连续4个a的一行</p>
<p>grep  “a\ {2,\ } “           打印出单词中至少连续2个a的一行</p>
<p>grep  “a*”                   打印出单词中有n个a的一行</p>
<p>grep  “a.*”                   打印出单词中有a且a后面接上任意个数目及字符的行</p>
<p>grep  “a\ ?”                  打印出单词中能匹配到0个或1个a的行（其实有2个以上的a也能匹配到，因为2个以上的a包含0个或1个a）</p>
<p>grep  “a\ +”                  打印出单词中能匹配到至少1个a的行</p>
<hr>
<h4 id="常用符号"><a href="#常用符号" class="headerlink" title="常用符号"></a><a href="http://www.zsythink.net/archives/1921" target="_blank" rel="noopener">常用符号</a></h4><p>grep  “a…”           打印出单词中能匹配到a后面接上3个任意字符的行</p>
<p>grep  “a[[:alpha:]]\ { 3\ }”            打印出单词中能匹配到a后面接上了3个任意大小写字母的行</p>
<p>[[:alpha:]]  表示任意大小写字母<br>[[:lower:]]  表示任意小写字母<br>[[:upper:]]  表示任意大写字母<br>[[:digit:]]  表示0到9之间的任意单个数字（包括0和9）<br>[[:alnum:]]  表示任意数字或字母<br>[[:space:]]  表示任意空白字符，包括”空格”、”tab键”等。<br>[[:punct:]]  表示任意标点符号</p>
<p>[0-9]与[[:digit:]]等效<br>[a-z]与[[:lower:]]等效<br>[A-Z]与[[:upper:]]等效<br>[a-zA-Z]与[[:alpha:]]等效<br>[a-zA-Z0-9]与[[:alnum:]]等效</p>
<p>grep  “a[ ^[:alpha:]]\ { 3\ }”       打印出单词中能匹配到a后面接上了3个不是大小写字母的行</p>
<p>[^ 0-9]与[ ^[:digit:]]等效<br>[ ^ a-z]与[ ^[:lower:]]等效<br>[ ^ A-Z]与[ ^[:upper:]]等效<br>[ ^ a-zA-Z]与[ ^[:alpha:]]等效<br>[ ^ a-zA-Z0-9]与[ ^[:alnum:]]等效</p>
<p>grep  “a[efg]”       打印出单词中能匹配到a后面接上了e或f或g的行</p>
<p>grep  “a[ ^efg]”       打印出单词中能匹配到a后面接上不是e或f或g的行</p>
<p>同时还有简短格式，但是并非所有正则表达式解析器都可以识别。使用的时候可以尝试加上-P参数<br>\d 表示任意单个0到9的数字<br>\D 表示任意单个非数字字符<br>\t 表示匹配单个横向制表符（相当于一个tab键）<br>\s表示匹配单个空白字符，包括”空格”，”tab制表符”等<br>\S表示匹配单个非空白字符</p>
<hr>
<h4 id="分组及向后引用"><a href="#分组及向后引用" class="headerlink" title="分组及向后引用"></a><a href="http://www.zsythink.net/archives/1952" target="_blank" rel="noopener">分组及向后引用</a></h4><p>grep  “\ (hello\ ) \ {2\ }”                 以hello为一个组（第一个分组），打印出单词中能匹配到2次hello的行</p>
<p>grep  “\ (hello\ ) word \1”             以hello为一个组，打印出有hello word hello的行。其中\1表示第一个分组</p>
<hr>
<h4 id="转义符"><a href="#转义符" class="headerlink" title="转义符"></a><a href="http://www.zsythink.net/archives/1977" target="_blank" rel="noopener">转义符</a></h4><p>grep  “a\ .\ .”                     打印出单词中能匹配到a..的行</p>
<p>grep  “a\ <em>\ </em>“                     打印出单词中能匹配到a**的行</p>
<p>grep  ‘a\ \ \ \ ‘                     打印出单词中能匹配到a\ \的行，注意此时使用单引号</p>
<hr>
<h3 id="2-2扩展正则表达式"><a href="#2-2扩展正则表达式" class="headerlink" title="2.2扩展正则表达式"></a>2.2<a href="http://www.zsythink.net/archives/1999" target="_blank" rel="noopener">扩展正则表达式</a></h3><p>使用扩展正则表达式时，要加上-E参数</p>
<p>在扩展正则表达式中，有|这个符号，按住“shift键”和“\键”就可以打出</p>
<p>grep  -E  “(com|net)$”     打印出以com或net结尾的行</p>
<p>在基本正则表达式中需要加\，但是扩展中不需要的如下：</p>
<p>?  表示匹配其前面的字符0或1次</p>
<p>+  表示匹配其前面的字符至少1次，或者连续多次，连续次数上不封顶。</p>
<p>{n} 表示前面的字符连续出现n次，将会被匹配到。</p>
<p>{x,y} 表示之前的字符至少连续出现x次，最多连续出现y次，都能被匹配到，换句话说，只要之前的字符连续出现的次数在x与y之间，即可被匹配到。</p>
<p>{,n} 表示之前的字符连续出现至多n次，最少0次，都会被匹配到。</p>
<p>{n,}表示之前的字符连续出现至少n次，才会被匹配到。</p>
<p>分组与后向引用<br>( ) 表示分组，我们可以将其中的内容当做一个整体，分组可以嵌套。<br>(ab) 表示将ab当做一个整体去处理。<br>\1 表示引用整个表达式中第1个分组中的正则匹配到的结果。<br>\2 表示引用整个表达式中第2个分组中的正则匹配到的结果。</p>
<hr>
<h2 id="3-awk"><a href="#3-awk" class="headerlink" title="3.awk"></a>3.awk</h2><blockquote>
<p>awk的基本语法结构</p>
<p>awk  [options]  ‘Pattern  {Action}’  file1,file2 </p>
<p>如果是对命令执行awk操作而不是文件，那么可以使用命令+管道符（|）+awk</p>
</blockquote>
<h3 id="3-1基础入门"><a href="#3-1基础入门" class="headerlink" title="3.1基础入门"></a><a href="http://www.zsythink.net/archives/1336" target="_blank" rel="noopener">3.1基础入门</a></h3><p>df  |awk  ‘{print  $5}’     表示输出df信息的第五列</p>
<p>df  |awk  ‘{print  $4,$5}’     表示输出df信息的第四和第五列</p>
<ul>
<li><p>除了输出文本或命令输出信息中的列，我们也可以自己添加信息，只需在””中添加即可</p>
<p>awk  ‘{print  “anychar:”$4,”anychar2”$5}’  file1</p>
</li>
<li><p>如果写成如下格式，那么输出的就不是第五列，而是输出$5</p>
<p>df  |awk  ‘{print  “$5”}’ </p>
</li>
</ul>
<p>Pattern中文含义是模式，特殊的2种模式BEGIN和END</p>
<ul>
<li><p>在执行文件1（file1）前，先执行BEGIN的内容，即先把aaa输出，然后再对文件1做处理，处理方式就是后面写的动作</p>
<p>awk  ‘BEGIN{print  “aaa”}  {print  “anychar:”$4,”anychar2”$5}’  file1</p>
</li>
<li><p>在执行完对文件1（file1）的操作后，再在结尾执行END的内容，即输出aaa</p>
<p>awk  ‘{print  “anychar:”$4,”anychar2”$5}  END{print  “aaa”}’  file1</p>
</li>
</ul>
<h3 id="3-2分隔符"><a href="#3-2分隔符" class="headerlink" title="3.2分隔符"></a><a href="http://www.zsythink.net/archives/1357" target="_blank" rel="noopener">3.2分隔符</a></h3><h4 id="3-2-1输入分割符"><a href="#3-2-1输入分割符" class="headerlink" title="3.2.1输入分割符"></a>3.2.1输入分割符</h4><p>文本输入的时候，默认是以空格作为分割符号的，但是我们可以手工指定在文本中的一行，该以什么符号作为区分一列的分割符</p>
<p> awk  -F#  ‘{print  $4,$5}’  file1            通过-F参数，来指定#作为输入分割符</p>
<p> awk  -v  FS=’#’  ‘{print  $4,$5}’  file1    通过-v参数，来修改系统内置的输入分割符变量，效果同上</p>
<h4 id="3-2-2输出分割符"><a href="#3-2-2输出分割符" class="headerlink" title="3.2.2输出分割符"></a>3.2.2输出分割符</h4><p>文本输出的时候，默认也是以空格作为分割符号的，但是我们可以指定其他的符号来连接不同的列</p>
<p>awk  -v  OFS=’++++’  ‘{print  $4,$5}’  file1    通过-v参数，来修改系统内置的输出分割符变量</p>
<p>注：输出分割时，用“，”来区分。如果是想把两列连在一起，可以写成以下形式</p>
<p>awk   ‘{print  $4$5}’  file1</p>
<h3 id="3-3awk变量"><a href="#3-3awk变量" class="headerlink" title="3.3awk变量"></a>3.3awk变量</h3><h4 id="3-3-1内置变量"><a href="#3-3-1内置变量" class="headerlink" title="3.3.1内置变量"></a>3.3.1内置变量</h4><table>
<thead>
<tr>
<th style="text-align:center">名称</th>
<th style="text-align:center">代码</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">输入分割符</td>
<td style="text-align:center">FS</td>
</tr>
<tr>
<td style="text-align:center">输出分隔符</td>
<td style="text-align:center">OFS</td>
</tr>
<tr>
<td style="text-align:center">输入记录分隔符</td>
<td style="text-align:center">RS</td>
</tr>
<tr>
<td style="text-align:center">输出记录分割符</td>
<td style="text-align:center">ORS</td>
</tr>
<tr>
<td style="text-align:center">当前行被分割成了几列</td>
<td style="text-align:center">NF</td>
</tr>
<tr>
<td style="text-align:center">行号</td>
<td style="text-align:center">NR</td>
</tr>
<tr>
<td style="text-align:center">各文件分别记录行号</td>
<td style="text-align:center">FNR</td>
</tr>
<tr>
<td style="text-align:center">当前文件名</td>
<td style="text-align:center">FILENAME</td>
</tr>
<tr>
<td style="text-align:center">命令行参数的个数</td>
<td style="text-align:center">ARGC</td>
</tr>
<tr>
<td style="text-align:center">保存的是命令行所给的各参数</td>
<td style="text-align:center">ARGV</td>
</tr>
</tbody>
</table>
<p>awk   ‘{print  NR,NF}’  file1         表示输出文件1中的行号及该行的列数</p>
<p>FS和OFS都是以每行各个字符间隔为单位</p>
<p>RS和ORS是来判断以什么条件来作为换行，默认情况下，系统认为是回车即换行</p>
<h4 id="3-3-2自定义变量"><a href="#3-3-2自定义变量" class="headerlink" title="3.3.2自定义变量"></a>3.3.2自定义变量</h4><p>awk  -v  变量名称=”变量值”</p>
<p>eg： awk  -v  mychar=”hahaha”   ‘BEGIN｛print  mychar｝’</p>
<p>or： awk  -v   ‘BEGIN｛mychar=”hahaha” ; print  mychar｝’</p>
<h3 id="3-4格式化"><a href="#3-4格式化" class="headerlink" title="3.4格式化"></a><a href="http://www.zsythink.net/archives/1421" target="_blank" rel="noopener">3.4格式化</a></h3><p><img src="/2019/08/11/grep-正则表达式-awk-sed/1.png" alt="1551853553486"></p>
<h3 id="3-5模式"><a href="#3-5模式" class="headerlink" title="3.5模式"></a><a href="http://www.zsythink.net/archives/1426" target="_blank" rel="noopener">3.5模式</a></h3><p><img src="/2019/08/11/grep-正则表达式-awk-sed/2.png" alt="1551853672703"></p>
<p>使用正则表达式</p>
<p>awk  ‘/正则表达式/ {print $0}’  file1</p>
<p><img src="/2019/08/11/grep-正则表达式-awk-sed/3.png" alt="1551853884184"></p>
<p><img src="/2019/08/11/grep-正则表达式-awk-sed/4.png" alt="1551854001928"></p>
<h3 id="3-6动作"><a href="#3-6动作" class="headerlink" title="3.6动作"></a><a href="http://www.zsythink.net/archives/2046" target="_blank" rel="noopener">3.6动作</a></h3><p><img src="/2019/08/11/grep-正则表达式-awk-sed/5.png" alt="1551854206133"></p>
<p><img src="/2019/08/11/grep-正则表达式-awk-sed/6.png" alt="1551854262131"></p>
<hr>
<h2 id="4-sed"><a href="#4-sed" class="headerlink" title="4.sed"></a>4.sed</h2><blockquote>
<p>awk的基本语法结构</p>
<p>awk  [options]  ‘动作’</p>
</blockquote>
<h3 id="4-1新增与删除"><a href="#4-1新增与删除" class="headerlink" title="4.1新增与删除"></a>4.1新增与删除</h3><p>sed  ‘sed  2,5d’             其中d表示删除，意味删除2到第5行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@vultr ~]<span class="comment"># nl /etc/passwd</span></span><br><span class="line">     1	root:x:0:0:root:/root:/bin/bash</span><br><span class="line">     2	bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">     3	daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">     4	adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">     5	lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">     6	sync:x:5:0:sync:/sbin:/bin/sync</span><br><span class="line">     7	shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">     8	halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">     9	mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">    10	operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">    11	games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line">    12	ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class="line">    13	nobody:x:99:99:Nobody:/:/sbin/nologin</span><br><span class="line">    14	systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin</span><br><span class="line">    15	dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class="line">    16	polkitd:x:999:998:User <span class="keyword">for</span> polkitd:/:/sbin/nologin</span><br><span class="line">    17	ntp:x:38:38::/etc/ntp:/sbin/nologin</span><br><span class="line">    18	sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">    19	postfix:x:89:89::/var/spool/postfix:/sbin/nologin</span><br><span class="line">    20	chrony:x:998:996::/var/lib/chrony:/sbin/nologin</span><br><span class="line">    21	tcpdump:x:72:72::/:/sbin/nologin</span><br><span class="line">[root@vultr ~]<span class="comment"># </span></span><br><span class="line">[root@vultr ~]<span class="comment"># nl /etc/passwd | sed '2,20d'</span></span><br><span class="line">     1	root:x:0:0:root:/root:/bin/bash</span><br><span class="line">    21	tcpdump:x:72:72::/:/sbin/nologin</span><br></pre></td></tr></table></figure>
<p>sed  ‘2a  字符串’，在第2行后面插入一字符串，i表示在第n行前插入字符串</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@vultr ~]<span class="comment"># nl /etc/passwd | sed '2,20d' |sed '1a nihaoa'</span></span><br><span class="line">     1	root:x:0:0:root:/root:/bin/bash</span><br><span class="line">nihaoa</span><br><span class="line">    21	tcpdump:x:72:72::/:/sbin/nologin</span><br><span class="line">[root@vultr ~]<span class="comment"># </span></span><br><span class="line">[root@vultr ~]<span class="comment"># </span></span><br><span class="line">[root@vultr ~]<span class="comment"># nl /etc/passwd | sed '2,20d' |sed '1i nihaoa'</span></span><br><span class="line">nihaoa</span><br><span class="line">     1	root:x:0:0:root:/root:/bin/bash</span><br><span class="line">    21	tcpdump:x:72:72::/:/sbin/nologin</span><br><span class="line">[root@vultr ~]<span class="comment"># </span></span><br><span class="line">[root@vultr ~]<span class="comment"># </span></span><br><span class="line">[root@vultr ~]<span class="comment"># nl /etc/passwd | sed '2,20d' |sed '2i nihaoa'</span></span><br><span class="line">     1	root:x:0:0:root:/root:/bin/bash</span><br><span class="line">nihaoa</span><br><span class="line">    21	tcpdump:x:72:72::/:/sbin/nologin</span><br><span class="line">[root@vultr ~]<span class="comment"># </span></span><br><span class="line">[root@vultr ~]<span class="comment"># </span></span><br><span class="line">[root@vultr ~]<span class="comment"># nl /etc/passwd | sed '2,20d' |sed '20i nihaoa'</span></span><br><span class="line">     1	root:x:0:0:root:/root:/bin/bash</span><br><span class="line">    21	tcpdump:x:72:72::/:/sbin/nologin</span><br><span class="line">[root@vultr ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>
<p>想要增加多行，可以先输入\，然后回车，就会跳转到下一行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@vultr ~]<span class="comment"># nl /etc/passwd | sed '2,19d' |sed '2a nihaoa \&gt;zaijian'</span></span><br><span class="line">     1	root:x:0:0:root:/root:/bin/bash</span><br><span class="line">    20	chrony:x:998:996::/var/lib/chrony:/sbin/nologin</span><br><span class="line">nihaoa &gt;zaijian</span><br><span class="line">    21	tcpdump:x:72:72::/:/sbin/nologin</span><br><span class="line">[root@vultr ~]<span class="comment"># </span></span><br><span class="line">[root@vultr ~]<span class="comment"># nl /etc/passwd | sed '2,19d' |sed '2a nihaoa \</span></span><br><span class="line">&gt; zaijian<span class="string">'</span></span><br><span class="line"><span class="string">     1	root:x:0:0:root:/root:/bin/bash</span></span><br><span class="line"><span class="string">    20	chrony:x:998:996::/var/lib/chrony:/sbin/nologin</span></span><br><span class="line"><span class="string">nihaoa </span></span><br><span class="line"><span class="string">zaijian</span></span><br><span class="line"><span class="string">    21	tcpdump:x:72:72::/:/sbin/nologin</span></span><br><span class="line"><span class="string">[root@vultr ~]#</span></span><br></pre></td></tr></table></figure>
<h3 id="4-2替代"><a href="#4-2替代" class="headerlink" title="4.2替代"></a>4.2替代</h3><p>sed  ‘2,19c  字符串’，c表示从2到19行被该字符串替代掉</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@vultr ~]<span class="comment"># nl /etc/passwd | sed '2,19c 2 to 19 no show'</span></span><br><span class="line">     1	root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 to 19 no show</span><br><span class="line">    20	chrony:x:998:996::/var/lib/chrony:/sbin/nologin</span><br><span class="line">    21	tcpdump:x:72:72::/:/sbin/nologin</span><br><span class="line">[root@vultr ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>
<p>sed  -n  ‘2,4p’，表示显示第2到第4行，-n参数需要加上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@vultr ~]<span class="comment"># nl /etc/passwd | sed '2,4p'</span></span><br><span class="line">     1	root:x:0:0:root:/root:/bin/bash</span><br><span class="line">     2	bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">     2	bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">     3	daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">     3	daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">     4	adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">     4	adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">     5	lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">     6	sync:x:5:0:sync:/sbin:/bin/sync</span><br><span class="line">     7	shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">     8	halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">     9	mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">    10	operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">    11	games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line">    12	ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class="line">    13	nobody:x:99:99:Nobody:/:/sbin/nologin</span><br><span class="line">    14	systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin</span><br><span class="line">    15	dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class="line">    16	polkitd:x:999:998:User <span class="keyword">for</span> polkitd:/:/sbin/nologin</span><br><span class="line">    17	ntp:x:38:38::/etc/ntp:/sbin/nologin</span><br><span class="line">    18	sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">    19	postfix:x:89:89::/var/spool/postfix:/sbin/nologin</span><br><span class="line">    20	chrony:x:998:996::/var/lib/chrony:/sbin/nologin</span><br><span class="line">    21	tcpdump:x:72:72::/:/sbin/nologin</span><br><span class="line">[root@vultr ~]<span class="comment"># </span></span><br><span class="line">[root@vultr ~]<span class="comment"># nl /etc/passwd | sed -n '2,4p'</span></span><br><span class="line">     2	bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">     3	daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">     4	adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br></pre></td></tr></table></figure>
<p>sed  ‘s/需要被替代的字符串/替换后的字符串/g’</p>
<p><img src="/2019/08/11/grep-正则表达式-awk-sed/7.png" alt="1552289061967"></p>
<h3 id="4-3直接在文本中做修改操作"><a href="#4-3直接在文本中做修改操作" class="headerlink" title="4.3直接在文本中做修改操作"></a>4.3直接在文本中做修改操作</h3><p><img src="/2019/08/11/grep-正则表达式-awk-sed/8.png" alt="1552289476341"></p>

      

      

          
        
          
        </div>

    </div>
    <footer class="article-footer">
      <a data-url="https://dilidonglong.github.io/2019/08/11/grep-正则表达式-awk-sed/" data-id="ck09sgni5000f4ovdn367euay" class="article-share-link">分享</a>
      
    </footer>

  

  

  

</article>



      
        <article id="post-iptables笔记" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/08/11/iptables笔记/">iptables笔记</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/08/11/iptables笔记/" class="article-date">
  <time datetime="2019-08-11T13:25:59.000Z" itemprop="datePublished">2019-08-11</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <h1 id="iptables笔记"><a href="#iptables笔记" class="headerlink" title="iptables笔记"></a>iptables笔记</h1><blockquote>
<p><a href="http://www.zsythink.net/archives/category/%E8%BF%90%E7%BB%B4%E7%9B%B8%E5%85%B3/iptables/" target="_blank" rel="noopener">朱双印博客-iptables规则</a></p>
</blockquote>
<p>数据经过防火墙流程图</p>
<p><img src="/2019/08/11/iptables笔记/1.png" alt="1550890197135"></p>
<hr>
<h2 id="1-查找规则"><a href="#1-查找规则" class="headerlink" title="1.查找规则"></a>1.查找规则</h2><blockquote>
<ul>
<li>iptables  -t  表名  -L</li>
<li>iptables  -t  表名  -L  链名                    #-L显示链名下的表名规则</li>
<li>iptables  -t  表名  -vL  链名                  #-v显示详细信息</li>
<li>iptables  -t  表名  -nvL  链名               #-n不进行地址解析</li>
<li>iptables  -t  表名  -xnvL  链名             #-x显示精确计数值</li>
<li>iptables  –line  -t  表名  -xnvL  链名             #–line在规则前加上序列号</li>
</ul>
</blockquote>
<h2 id="2-添加规则"><a href="#2-添加规则" class="headerlink" title="2.添加规则"></a>2.添加规则</h2><blockquote>
<ul>
<li>iptables  -t  表名  -A  链名  匹配条件  -j  动作</li>
</ul>
<p><code>iptables -t filter -A INPUT -s 192.168.1.1 -j DROP</code>   #-A插入到规则最后</p>
<ul>
<li>iptables  -t  表名  -I  链名  匹配条件  -j  动作</li>
</ul>
<p><code>iptables -t filter -I INPUT -s 192.168.1.1 -j ACCEPT</code>  #-I插入到规则开头</p>
<ul>
<li>iptables  -t  表名  -I  链名  规则序号  匹配条件  -j  动作</li>
</ul>
<p><code>iptables -t filter -I INPUT 5 -s 192.168.1.1 -j REJECT</code>  #在第五行规则中插入</p>
<ul>
<li>iptables  -t  表名  -P  链名  动作 </li>
</ul>
<p><code>iptables -t filter -P INPUT REJECT</code>           #设置INPUT链中filter表的默认规则</p>
</blockquote>
<h2 id="3-删除规则"><a href="#3-删除规则" class="headerlink" title="3.删除规则"></a>3.删除规则</h2><blockquote>
<ul>
<li>按规则序号删除<br>iptables  -t  表名  -D  链名  规则序号 </li>
</ul>
<p><code>iptables -t filter -D INPUT 5</code>     </p>
<ul>
<li>按匹配条件与动作删除</li>
</ul>
<p>iptables  -t  表名  -D  链名  匹配条件  -j  匹配动作 </p>
<p><code>iptables -t filter -D INPUT -s 192.168.1.1 -j ACCEPT</code>     </p>
<ul>
<li>删除某个链下指定表的所有规则</li>
</ul>
<p>iptables  -t  表名  -F  链名  </p>
<p><code>iptables -t filter -F INPUT</code>     </p>
<ul>
<li>删除所有链下指定表的所有规则</li>
</ul>
<p>iptables  -t  表名  -F </p>
<p><code>iptables -t filter -F</code>   </p>
</blockquote>
<h2 id="4-修改规则"><a href="#4-修改规则" class="headerlink" title="4.修改规则"></a>4.修改规则</h2><p>如果要修改规则，必须要指明原规则中的匹配条件（或者理解为只能修改动作）</p>
<blockquote>
<p>iptables  -t  表名  -R  链名  规则序号  规则原始匹配条件  -j  动作</p>
<p><code>iptables -t filter -R INPUT 3 -S 192.168.1.1 -J ACCEPT</code></p>
<p>另外一种方式是，先删除规则。再在原来的位置添加规则   </p>
</blockquote>
<h2 id="5-保存规则"><a href="#5-保存规则" class="headerlink" title="5.保存规则"></a>5.保存规则</h2><p><img src="/2019/08/11/iptables笔记/Users\优积谷\AppData\Roaming\Typora\typora-user-images\1550893264062.png" alt="1550893264062"></p>
<h2 id="6-匹配条件"><a href="#6-匹配条件" class="headerlink" title="6.匹配条件"></a>6.匹配条件</h2><h3 id="6-1基本匹配条件"><a href="#6-1基本匹配条件" class="headerlink" title="6.1基本匹配条件"></a>6.1基本匹配条件</h3><ul>
<li>-s用于匹配源IP地址。可以指定多个IP地址，多个IP地址间用“，”号隔开；也可以指定IP网段</li>
</ul>
<p><code>iptables -t filter -I INPUT -s 192.168.1.111,192.168.1.118 -j DROP</code></p>
<p><code>iptables -t filter -I INPUT -s 192.168.1.0/24 -j ACCEPT</code></p>
<p><code>iptables -t filter -I INPUT ! -s 192.168.1.0/24 -j ACCEPT</code></p>
<hr>
<ul>
<li>-d用于匹配目的IP地址。可以指定多个IP地址，多个IP地址间用“，”号隔开；也可以指定IP网段</li>
</ul>
<p><code>iptables -t filter -I OUTPUT -d 192.168.1.111,192.168.1.118 -j DROP</code></p>
<p><code>iptables -t filter -I INPUT -d 192.168.1.0/24 -j ACCEPT</code></p>
<p><code>iptables -t filter -I INPUT ! -d 192.168.1.0/24 -j ACCEPT</code></p>
<hr>
<ul>
<li>-p用于匹配协议类型，常见的匹配类型有TCP、UDP、ICMP、ESP、AH等</li>
</ul>
<p><code>iptables -t filter -I INPUT -p tcp -s 192.168.1.146 -j ACCEPT</code></p>
<p><code>iptables -t filter -I INPUT ! -p udp -s 192.168.1.146 -j ACCEPT</code></p>
<hr>
<ul>
<li>-i表示从哪个网卡接口流入本机，不能用于output链和postrouting链</li>
<li>-o表示从哪个网卡接口流出本机，不能用于prerouting链和input链</li>
</ul>
<h3 id="6-2扩展匹配条件-如果协议和扩展模块一致，扩展模块可省略"><a href="#6-2扩展匹配条件-如果协议和扩展模块一致，扩展模块可省略" class="headerlink" title="6.2扩展匹配条件(如果协议和扩展模块一致，扩展模块可省略)"></a>6.2扩展匹配条件(如果协议和扩展模块一致，扩展模块可省略)</h3><p>TCP扩展模块：</p>
<ul>
<li>-p tcp -m tcp –sport，用于匹配协议源端口，可以用冒号”:”指定一个连续的端口范围(udp类似)</li>
<li>-p tcp -m tcp –dport，用于匹配协议目的端口，可以用冒号”:”指定一个连续的端口范围（udp类似）</li>
</ul>
<p><code>iptables -t filter -I OUTPUT -d 192.168.1.146 -p tcp -m tcp --sport 22 -j REJECT</code></p>
<p><code>iptables -t filter -I INPUT -s 192.168.1.146 -p tcp -m tcp --dport 22:25 -j REJECT</code></p>
<p><code>iptables -t filter -I INPUT -s 192.168.1.146 -p tcp -m tcp --dport :22 -j REJECT</code></p>
<p><code>iptables -t filter -I INPUT -s 192.168.1.146 -p tcp -m tcp --dport 80: -j REJECT</code></p>
<p><code>iptables -t filter -I OUTPUT -d 192.168.1.146 -p tcp -m tcp ! --sport 22 -j ACCEPT</code></p>
<ul>
<li>–tcp-flags用于匹配tcp头部中的标志位</li>
</ul>
<p><code>iptables -t filter -I INPUT -p tcp -m tcp --dport 22 --tcp-flags SYN,ACK,FIN,RST,URG,PSH SYN -j REJECT</code></p>
<p><code>iptables -t filter -I OUTPUT -p tcp -m tcp --sport 22 --tcp-flags SYN,ACK,FIN,RST,URG,PSH SYN,ACK -j REJECT</code></p>
<p><code>iptables -t filter -I INPUT -p tcp -m tcp --dport 22 --tcp-flags ALL SYN -j REJECT</code></p>
<p><code>iptables -t filter -I OUTPUT -p tcp -m tcp --sport 22 --tcp-flags ALL SYN,ACK -j REJECT</code></p>
<ul>
<li>–syn,相当于使用了“–tcp-flags SYN,ACK,FIN,RST SYN”</li>
</ul>
<p><code>iptables -t filter -I INPUT -p tcp -m tcp --dport 22 --syn -j REJECT</code></p>
<hr>
<p>multiport扩展模块：</p>
<ul>
<li>-p tcp -m multiport –sports，用于匹配协议源端口，可以用逗号”,”指定多个离散端口</li>
<li>-p tcp -m multiport –dports，用于匹配协议目的端口，可以用逗号”,”指定多个离散端口</li>
</ul>
<p><code>iptables -t filter -I OUTPUT -d 192.168.1.146 -p udp -m multiport --sports 137,138 -j REJECT</code></p>
<p><code>iptables -t filter -I INPUT -s 192.168.1.146 -p tcp -m multiport --dports 22,80 -j REJECT</code></p>
<p><code>iptables -t filter -I INPUT -s 192.168.1.146 -p tcp -m multiport ! --dports 22,80 -j REJECT</code></p>
<p><code>iptables -t filter -I INPUT -s 192.168.1.146 -p tcp -m multiport --dports 80:88 -j REJECT</code></p>
<p><code>iptables -t filter -I INPUT -s 192.168.1.146 -p tcp -m multiport --dports 22,80:88 -j REJECT</code></p>
<hr>
<p><a href="http://www.zsythink.net/archives/1588" target="_blank" rel="noopener">icmp扩展模块（略）</a></p>
<p><a href="http://www.zsythink.net/archives/1597" target="_blank" rel="noopener">state扩展模块（略，但是概念重要）</a></p>
<h2 id="7-匹配动作"><a href="#7-匹配动作" class="headerlink" title="7.匹配动作"></a>7.匹配动作</h2><ul>
<li>动作SNAT，进行源地址转换(公网是固定IP)</li>
</ul>
<p><code>iptables -t nat -A POSTROUTING -s 10.1.0.0/16 -j SNAT --to-source 公网IP</code></p>
<ul>
<li>动作MASQUERADE，进行源地址转换（公网是动态IP）</li>
</ul>
<p><code>iptables -t nat -A POSTROUTING -s 10.1.0.0/16 -o eth0 -j MASQUERADE</code></p>
<ul>
<li>动作DNAT，进行目的地址转换</li>
</ul>
<p><code>iptables -t nat -I PREROUTING -d 公网IP -p tcp --dport 公网端口 -j DNAT --to-destination 私网IP:端口号</code></p>
<p><code>iptables -t nat -I PREROUTING -d 公网IP -p tcp --dport 8080 -j DNAT --to-destination 10.1.0.1:80</code></p>
<p><code>iptables -t nat -A POSTROUTING -s 10.1.0.0/16 -j SNAT --to-source 公网IP</code></p>
<ul>
<li>动作REDIRECT，进行本机端口重定向</li>
</ul>
<p><code>iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 8080</code></p>

      

      

          
        
          
        </div>

    </div>
    <footer class="article-footer">
      <a data-url="https://dilidonglong.github.io/2019/08/11/iptables笔记/" data-id="ck09sgnhf00004ovdquccsiaw" class="article-share-link">分享</a>
      
    </footer>

  

  

  

</article>



      
        <article id="post-新东方赵丽托福英语词汇8000-01" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/07/18/新东方赵丽托福英语词汇8000-01/">新东方赵丽托福英语词汇8000-01</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/07/18/新东方赵丽托福英语词汇8000-01/" class="article-date">
  <time datetime="2019-07-18T14:53:40.000Z" itemprop="datePublished">2019-07-18</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/英语/">英语</a>
  </div>

      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <h1 id="新东方赵丽托福英语词汇8000-01"><a href="#新东方赵丽托福英语词汇8000-01" class="headerlink" title="新东方赵丽托福英语词汇8000-01"></a>新东方赵丽托福英语词汇8000-01</h1><p>共30词</p>
<table>
<thead>
<tr>
<th style="text-align:center">compel</th>
<th style="text-align:center">repel</th>
<th style="text-align:center">insidious</th>
<th style="text-align:center">assist</th>
<th style="text-align:center">timid</th>
<th style="text-align:center">toxic</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>compulsive</strong></td>
<td style="text-align:center"><strong>repulsive</strong></td>
<td style="text-align:center"><strong>preside</strong></td>
<td style="text-align:center"><strong>resist</strong></td>
<td style="text-align:center"><strong>intimidate</strong></td>
<td style="text-align:center"><strong>intoxicate</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>compulsion</strong></td>
<td style="text-align:center"><strong>repulsion</strong></td>
<td style="text-align:center"><strong>resident</strong></td>
<td style="text-align:center"><strong>insist</strong></td>
<td style="text-align:center"><strong>Fawn</strong></td>
<td style="text-align:center"><strong>Pawn</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>expel</strong></td>
<td style="text-align:center"><strong>impel</strong></td>
<td style="text-align:center"><strong>Vigor</strong></td>
<td style="text-align:center"><strong>persist</strong></td>
<td style="text-align:center"><strong>Spawn</strong></td>
<td style="text-align:center"><strong>Brawn</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>propel</strong></td>
<td style="text-align:center"><strong>dispel</strong></td>
<td style="text-align:center"><strong>invigorate</strong></td>
<td style="text-align:center"><strong>Lawn</strong></td>
<td style="text-align:center"><strong>Yawn</strong></td>
<td style="text-align:center"><strong>Dawn</strong></td>
</tr>
</tbody>
</table>
<h2 id="4-词根词缀法"><a href="#4-词根词缀法" class="headerlink" title="4.词根词缀法"></a>4.词根词缀法</h2><p>词根:(本义) body</p>
<p>前缀:改变含义不变词性  anti(反)+body(体)-抗体</p>
<p>后缀:改变词性,不变含义 pass       passable</p>
<p><br></p>
<ol>
<li><p>词性转换库:</p>
<p>pel表示推（verb）—pulsive（形容词）—pulsion（名词）</p>
<p>compel （com共同+pel）</p>
<blockquote>
<p>verb:强迫，迫使</p>
<p>The law can compel fathers to make regular payments for their children.<br>这项法律可强制父亲定期支付子女的费用。</p>
</blockquote>
<blockquote>
<p>compulsive( adjective ):难以制止的；难控制的</p>
<p>compulsive eating/spending/gambling<br>强迫性进食╱消费；上瘾的赌博</p>
<p>The programme made compulsive viewing.<br>这节目引人入胜，收看起来欲罢不能。</p>
</blockquote>
<blockquote>
<p>compulsion（noun）:强迫；强制</p>
<p>compulsion(on sb) to do sth</p>
<p>There are no compulsions on students to attend classes.<br>没有强求学生上课。</p>
</blockquote>
<p><br></p>
<p>repel(re向后+pel)</p>
<blockquote>
<p>verb:击退；驱逐</p>
<p>Troops repelled an attempt to infiltrate the south of the island.<br>部队挫败了对该岛南部的潜入企图。</p>
</blockquote>
<p><br></p>
<p> expel (ex老大+pel)</p>
<blockquote>
<p>verb:把…开除（或除名）;驱逐出境;排出；喷出</p>
<p>1.She was expelled from school at 15.<br>她 15 岁时被学校开除了。</p>
<p>2.Foreign journalists are being expelled.<br>外国记者被驱逐出境。</p>
</blockquote>
<p><br></p>
<p>impel (im内心深处+pel)</p>
<blockquote>
<p>verb:迫使(激励)</p>
<p>He felt impelled to investigate further.<br>他觉得有必要作进一步调查。</p>
</blockquote>
<p><br></p>
<p>propel (pro向前+pel)</p>
<blockquote>
<p>verb:推动；驱动；推进</p>
<p>He succeeded in propelling the ball across the line.<br>他成功地把球带过线。</p>
<p>Fury propelled her into action.<br>怒火驱使她行动起来。</p>
</blockquote>
<p><br></p>
<p>dispel(dis分开+pel)</p>
<blockquote>
<p>verb:驱散，消除（尤指感觉或信仰）</p>
<p>His speech dispelled any fears about his health.<br>他的发言消除了人们对他身体健康的担心。</p>
</blockquote>
</li>
</ol>

      

      

          
        
          
        </div>

    </div>
    <footer class="article-footer">
      <a data-url="https://dilidonglong.github.io/2019/07/18/新东方赵丽托福英语词汇8000-01/" data-id="ck09sgni9000l4ovdjukb6qtp" class="article-share-link">分享</a>
      
    </footer>

  

  

  

</article>



      
  </article>
  
  
    <nav class="page-nav">
      
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
    </nav>
  
</section>
</div>

  <footer class="footer">
  
  <div class="outer">
    <div class="float-right">
      <ul class="list-inline">
  
    <li><i class="fe fe-smile-alt"></i> <span id="busuanzi_value_site_uv"></span></li>
  
</ul>
    </div>
    <ul class="list-inline">
      <li>&copy; 2019 望伊如西の博客</li>
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
      <li>Theme  <a href="https://github.com/zhwangart/hexo-theme-ocean">Ocean</a></li>
    </ul>
  </div>
</footer>

</main>
<aside class="sidebar">
  <button class="navbar-toggle"></button>

<nav class="navbar">
  
    <div class="logo">
      <a href="/"><img src="/images/hexo.svg" alt="望伊如西の博客"></a>
    </div>
  
  <ul class="nav nav-main">
    
      <li class="nav-item">
        <a class="nav-item-link" href="/">主页</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/categories">分类</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/gallery">相册</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/about">关于</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/archives">归档</a>
      </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="Search">
        <i class="fe fe-search"></i>
        搜索
      </a>
    </li>
  </ul>
</nav>

<nav class="navbar navbar-bottom">
  <ul class="nav">
      <li class="nav-item">
          <div class="totop" id="totop">
    <i class="fe fe-rocket"></i>
</div>
      </li>
    <li class="nav-item">
      
        <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
          <i class="fe fe-feed"></i>
        </a>
      
    </li>
  </ul>
</nav>

<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
</aside>
<script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>


  <script src="/fancybox/jquery.fancybox.min.js"></script>



  <script src="/js/search.js"></script>


<script src="/js/ocean.js"></script>

</body>
</html>